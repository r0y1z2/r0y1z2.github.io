<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>05 shell脚本进阶 | XBCID's BLOG</title><meta name="keywords" content="Linux,openEuler,Huawei,HCIP"><meta name="author" content="XBCID"><meta name="copyright" content="XBCID"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="05 shell脚本进阶"><meta name="application-name" content="05 shell脚本进阶"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="05 shell脚本进阶"><meta property="og:url" content="http://example.com/2025/03/06/openEuler/%E7%AC%94%E8%AE%B0/IP/05%20shell%E8%84%9A%E6%9C%AC%E8%BF%9B%E9%98%B6/index.html"><meta property="og:site_name" content="XBCID's BLOG"><meta property="og:description" content="前言本章主要讲述Shell脚本的进阶功能，包括条件判断、函数、正则表达式、grep、sed、awk命令。  掌握条件判断的使用 掌握函数的常见操作 掌握grep语法与常见操作 掌握正则表达式的基本用法 掌握sed语法与常见操作 掌握awk语法与常见操作  0x01 Shell脚本中常用的条件判断方式"><meta property="og:locale" content="zh"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="XBCID"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="前言本章主要讲述Shell脚本的进阶功能，包括条件判断、函数、正则表达式、grep、sed、awk命令。  掌握条件判断的使用 掌握函数的常见操作 掌握grep语法与常见操作 掌握正则表达式的基本用法 掌握sed语法与常见操作 掌握awk语法与常见操作  0x01 Shell脚本中常用的条件判断方式"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/03/06/openEuler/%E7%AC%94%E8%AE%B0/IP/05%20shell%E8%84%9A%E6%9C%AC%E8%BF%9B%E9%98%B6/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: XBCID","link":"链接: ","source":"来源: XBCID's BLOG","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'XBCID's BLOG',
  title: '05 shell脚本进阶',
  postAI: '',
  pageFillDescription: '前言, 0x01 Shell脚本中常用的条件判断方式, 1.1 Test条件判断简介, 1.1.1 Test的使用场景 - 数值比较, 1.1.2 Test的使用场景 - 字符串比较, 1.1.3 Test的使用场景 - 文件比较, 1.1.4 Test的使用场景 - 逻辑判断, 1.2 中括号条件判断的使用, 1.3 双中括号条件判断的使用, 1.4 双括号条件判断的使用, 1.5 括号逻辑判断简介, 1.6 条件判断语法结构总结, 1.7 条件判断用于for循环嵌套, 1.8 条件判断用于while循环嵌套, 0x02 Shell脚本中的函数, 2.1 函数结构简介, 2.2 函数退出状态码设置, 2.3 函数查看与删除, 2.4 函数的输出值读取, 2.5 函数的传参与递归, 2.6 函数库的文件, 0x03 GREP命令使用简介, 3.1 Grep命令简介, 3.2 Grep命令选项概览, 3.2.1 Grep输出控制选项, 3.2.2 Grep上下文控制选项, 3.2.3 Grep模式选择选项, 3.3 正则表达式简介, 0x04 SED流编辑器简介, 4.1 Sed功能与运行原理, 4.2 Sed参数选项, 4.3 Sed的应用 - 行号定位, 4.4 Sed的应用 - 正则定位, 4.5 Sed的应用 - 文本的增删改查, 4.6 Sed的应用 - 文本内容的搜索替换, 4.7 Sed的应用 - 文件操作, 4.8 Sed的应用 - 归组, 4.9 Sed的应用 - 表达式串行, 0x05 AWK语句简介, 5.1 Awk简介, 5.2 Awk的模式和动作, 5.3 Awk的模式总览, 5.4 Awk的常用模式 - 正则表达式, 5.5 Awk的常用模式 - 常量表达式, 5.6 awk字段分隔符, 5.7 awk记录分隔符, 5.8 Awk的动作总览, 5.9 Awk的常用动作 - 内置函数, 5.10 Awk的动作 - 函数举例, 5.11 Awk的常用动作 - 内置变量, 5.12 Awk的常用动作 - 自定义变量, 5.13 Awk的使用场景 - 格式化输出, 5.13.1 printf精度, 5.14 Awk的使用场景 - 控制语句, 5.15 Awk的脚本模式, 0x06 本章总结前言本章主要讲述脚本的进阶功能包括条件判断函数正则表达式命令掌握条件判断的使用掌握函数的常见操作掌握语法与常见操作掌握正则表达式的基本用法掌握语法与常见操作掌握语法与常见操作脚本中常用的条件判断方式条件判断应用于流程控制通过是否满足指定条件来控制脚本的后续操作脚本中常见的条件判断方式有中括号双中括号双括号条件判断简介语法结构表达式如果命令中列出的条件成立命令就会退出并返回退出状态码如果条件不成立命令就会退出并返回非零的退出状态码这使得语句不会再被执行的使用场景数值比较命令不能用于浮点值比较数值比较采用的使用场景字符串比较字符串中小于和大于比较需要在和之前使用转义字符例如的使用场景文件比较文件新旧比较旧意味着文件创建时间更早检查是否比新检查是否比旧判断文件是否存在并且非空的使用场景逻辑判断逻辑判断可以通过或实现表达式表达式表达式表达式中括号条件判断的使用中括号命令具有标准的数值比较和字符串比较功能与功能一致语法结构前后需要有一个空格双中括号条件判断的使用双中括号命令提供了针对字符串比较的高级特性语法结构前后需要有一个空格双中括号里的使用了命令中采用的标准字符串比较也提供了命令未提供的另一个特性模式匹配双括号条件判断的使用双括号命令允许在比较过程中使用高级数学表达式语法结构可以是任意的数学赋值或比较表达式除了命令使用的标准数学运算符右表列出了双括号命令中会用到的其他运算符双括号语法结构类似语言括号逻辑判断简介也可进行逻辑判断通过但语句判断来控制运行为真才执行为假才执行多个或组合使用时判断如下前面命令执行成功才会执行下一条命令前面命令执行成功后面的命令就不再执行命令执行成功表示为真如为真条件判断语法结构总结条件判断用于流程控制语句中的判断条件语法结构表达式中括号表达式表达式前后必须各有一个空格双中括号表达式相比单中括号支持的特性更多表达式同样前后必须各有一个空格类风格双括号表达式表达式前后没有空格条件判断用于循环嵌套条件判断用于循环嵌套脚本中的函数函数结构简介允许将一组命令或语句形成一段代码块这段代码块称为函数并且可以用函数名调用这段代码块语法结构标准定义两种简洁定义括号内不带任何参数函数需要先定义再调用使用执行脚本执行可以将脚本中的函数或变量加载到当前中常用的语法结构为简介定义函数退出状态码设置命令用于退出函数并返回特定的退出状态码命令允许指定一个整数值来定义函数的退出状态码退出状态码必须是变量会返回执行的最后一条命令的退出状态码函数结束立即使用查看返回值如果在用变量提取函数返回值之前执行了其他命令函数的返回值就会丢失默认退出状态码命令执行成功一般性未知错误命令参数使用错误函数查看与删除命令可以查看当前中所有的变量和函数命令可以删除当前中的某个变量或函数可以查看函数列表可以查看函数的具体定义函数的输出值读取如果函数定义了运行结束后的输出可通过来读取该输出值例如将在函数的输出值赋给变量函数会用语句来显示计算的结果该脚本会获取函数的输出而不是查看退出状态码函数的传参与递归函数传参和脚本传参一致使用表示第个参数函数体里面可以调用函数本身实现函数的递归调用运行该脚本函数库的文件允许创建函数库文件然后在多个脚本中引用该库文件创建库函数文件运行库函数文件命令使用简介命令简介全局搜索正则表达式是一种文本搜索工具它能根据模式对目标进行逐行搜索并将结果输出显示语法结构选项匹配模式文件数据查看源文件在一个或多个文件中搜索字符串模板搜索的结果被送到标准输出不影响原文件内容可用于脚本因为通过返回一个状态值来说明搜索的状态如果模板搜索成功则返回如果搜索不成功则返回如果搜索的文件不存在则返回利用这些返回值就可进行一些自动化的文本处理工作命令选项概览通过命令查看所有选项命令选项包含以下几类模式选择类输出控制类上下文控制类其他类输出控制选项的文本内容如下上下文控制选项内容模式选择选项正则表达式简介正则表达式描述了一种字符串匹配的模式使用字符串来描述匹配一系列符合某个规则的字符串支持的命令等例如普通字符大小写字母数字标点符号及一些其他符号示例普通元字符在正则表达式中具有特殊意义的专用字符示例扩展元字符扩展的元字符使用时需要使用转义字符或添加特殊选项示例示例正则表达式由三部分组成字符类数量限定符位置限定符流编辑器简介功能与运行原理流编辑器用于文件处理逐行处理内容将当前行存储在临时缓冲区中用命令处理缓冲区的内容输出到屏幕语法结构选项定位符命令文件选项脚本名文件脚本名文件主要用来自动编辑一个或者多个文件简化对文件的反复操作编写转换程序等主要用来将数据进行增删改查操作一次一行的设计优点读非常大的文件不会出问题如果全部读取可能会内存溢出或处理速度非常慢可以使用重定向存储输出但不能重定向输出到原始文件参数选项可以查看的选项列表的应用行号定位行号使用数字定位逗号波浪号加号用于行号操作打印第三行打印行从第行开始步长为第行以及后面行打印内容所在行号的应用正则定位正则定位使用左右包含正则表达式扩展正则使用选项的应用文本的增删改查每一行前增加第一行前增加第一行后增加删除第一行替换第一行为的应用文本内容的搜索替换选项搜索的内容替换的内容动作文件内容有时分隔符可以用等自定义可以保存查找串以便在替换串中引用替换行中第一个为替换行中全部为替换为的应用文件操作将中内容插入到第行之后将中第一行另存到中的应用归组命令中的大括号用于以下两个目的范围包含在另一个范围中嵌套对同一个范围执行多个命令或者操作归组的应用表达式串行多个表达式串行有以下两种表示方法表达式表达式选项允许在同一行里执行多条命令命令的执行顺序语句简介简介是一种编程语言主要用于在下对文本或数据进行处理数据可以来自标准输出一个或多个文件其他命令的输出逐行扫描寻找匹配模式的行并在行上进行处理支持条件判断支持和循环语法结构选项模式动作文件使用一行作为输入并将这一行赋给内部变量每一行也可以称为一个记录以换行符结束每行被间隔符默认空格或制表符分解成字段每个字段存储在已编号的变量中从开始使用函数打印字段打印出来的字段会以空格分割因为之间有一个逗号逗号比较特殊它映射为另一个内部变量称为输出字段分隔符默认为空格处理完一行后从文件中获取另一行并存储在中覆盖原来的内容然后将新的字符串分割成字段并处理的模式和动作语法结构分隔符模式动作模式动作模式动作输入文件分隔符模式动作模式动作模式动作输入文件分隔符模式动作模式动作模式动作输入文件模式和动作组合在一起形成一条指令整个指令用单引号包含指令之间可紧挨在一起也可用空格或分号隔开但是一条指令则不需要加分号模式和动作都是可选的省略模式时默认匹配所有行省略动作时默认为输出整行有包裹的就是动作没有包裹的就是模式的模式总览模式决定动作语句何时出发及触发事件模式可以是下面其中之一特殊模式正则表达式关系比较表达式逻辑表达式三元表达式常量表达式表达式为真时执行动作范围模式如果省略模式部分动作将时刻保持执行状态即动作应用到全部记录的常用模式正则表达式内容匹配内容内容正则表达式需要用一对包含的常用模式常量表达式常量由字符串常量与数值常量组成字符串常量含引号而数值常量没用凡是非的数字就表示匹配成功也就是为真否则表示匹配失败为假凡是非空的字符串就表示匹配成功也就是为真否则表示匹配失败为假真执行代码假不执行代码字符串是由引号引起来的比如数字与字符串是不一样的数字为假字符串为真不为空字段分隔符字段分隔符可以使用选项指定也可以在模式中的变量指定记录分隔符的动作总览动作之间由换行符或分号隔开并位于大括号内动作语句包括内置函数变量或数组赋值输入和输出语句控制语句条件和循环语句等如果省略动作它就会有一个默认的行为即则输出匹配的全部记究的常用动作内置函数函数分为内建函数和自定义函数的动作函数举例字符串替换函数使用举例的常用动作内置变量的常用动作自定义变量格式变量名变量值输入文件名变量位置在文件名之前否则不能调用不能调用这些变量定义变量并赋值变量调用不加的使用场景格式化输出类似默认打印换行类似默认打印不换行语言风格标志最小宽度精度转换符转换符字符打印第一个字符字符串十进制整数无符号十进制整数无符号十六进制整数表示无符号十六进制整数表示无符号八进制整数浮点数科学记数法记数法浮点数或取决于哪个更短删除尾部或取决于哪个更短删除尾部自身标志左对齐用于数字转换在正数之前添加空格负数之前添加负数打印正负数符号对于添加前缀对于添加前缀对于添加前缀对于添加小数点对于不删除尾部用而不是空白符来填充所显示的值精度的使用场景控制语句中的控制语句条件测试使用单括号包含的脚本模式脚本里存放命令清单不需要使用引号包含命令多个命令用分号分隔文件文件名本章总结本章主要讲述了的进阶功能包括条件判断函数正则表达式以及常用的命令工具擅长数据查找定位擅长数据修改擅长数据切片数据格式化功能最复杂',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-05-19 03:44:16',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">XBCID's BLOG</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HCIA/" style="font-size: 1.05rem;">HCIA<sup>9</sup></a><a href="/tags/HCIP/" style="font-size: 1.05rem;">HCIP<sup>6</sup></a><a href="/tags/Huawei/" style="font-size: 1.05rem;">Huawei<sup>15</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>18</sup></a><a href="/tags/openEuler/" style="font-size: 1.05rem;">openEuler<sup>18</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">May 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">23</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">March 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">February 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Linux</span></a><a class="article-meta__tags" href="/tags/openEuler/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>openEuler</span></a><a class="article-meta__tags" href="/tags/Huawei/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Huawei</span></a><a class="article-meta__tags" href="/tags/HCIP/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>HCIP</span></a></span></div></div><h1 class="post-title" itemprop="name headline">05 shell脚本进阶</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-03-06T12:26:00.000Z" title="发表于 2025-03-06 20:26:00">2025-03-06</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-05-18T19:44:16.316Z" title="更新于 2025-05-19 03:44:16">2025-05-19</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为重庆"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>重庆</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/03/06/openEuler/%E7%AC%94%E8%AE%B0/IP/05%20shell%E8%84%9A%E6%9C%AC%E8%BF%9B%E9%98%B6/"><header><a href="/tags/Linux/" tabindex="-1" itemprop="url">Linux</a><a href="/tags/openEuler/" tabindex="-1" itemprop="url">openEuler</a><a href="/tags/Huawei/" tabindex="-1" itemprop="url">Huawei</a><a href="/tags/HCIP/" tabindex="-1" itemprop="url">HCIP</a><h1 id="CrawlerTitle" itemprop="name headline">05 shell脚本进阶</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">XBCID</span><time itemprop="dateCreated datePublished" datetime="2025-03-06T12:26:00.000Z" title="发表于 2025-03-06 20:26:00">2025-03-06</time><time itemprop="dateCreated datePublished" datetime="2025-05-18T19:44:16.316Z" title="更新于 2025-05-19 03:44:16">2025-05-19</time></header><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本章主要讲述Shell脚本的进阶功能，包括条件判断、函数、正则表达式、grep、sed、awk命令。</p>
<ul>
<li>掌握条件判断的使用</li>
<li>掌握函数的常见操作</li>
<li>掌握grep语法与常见操作</li>
<li>掌握正则表达式的基本用法</li>
<li>掌握sed语法与常见操作</li>
<li>掌握awk语法与常见操作</li>
</ul>
<h2 id="0x01-Shell脚本中常用的条件判断方式"><a href="#0x01-Shell脚本中常用的条件判断方式" class="headerlink" title="0x01 Shell脚本中常用的条件判断方式"></a>0x01 Shell脚本中常用的条件判断方式</h2><ul>
<li>条件判断应用于流程控制，通过是否满足指定条件来控制脚本的后续操作。</li>
<li>Shell脚本中常见的条件判断方式有<ul>
<li>test</li>
<li>中括号<code>[]</code></li>
<li>双中括号<code>[[]]</code></li>
<li>双括号<code>(())</code></li>
</ul>
</li>
</ul>
<h3 id="1-1-Test条件判断简介"><a href="#1-1-Test条件判断简介" class="headerlink" title="1.1 Test条件判断简介"></a>1.1 Test条件判断简介</h3><p>语法结构:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test 表达式:test 1 -eq 1</span><br></pre></td></tr></table></figure>
<p>如果test命令中列出的条件<strong>成立</strong>，test命令就会退<strong>出并返回退出状态码0</strong>。如果条件<strong>不成立</strong>，test命令就会<strong>退出并返回非零的退出状态码</strong>，这使得<strong>if-then语句不会再被执行</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if test 1 -eq 1;then echo &quot;a=b&quot;;fi</span><br></pre></td></tr></table></figure>


<h4 id="1-1-1-Test的使用场景-数值比较"><a href="#1-1-1-Test的使用场景-数值比较" class="headerlink" title="1.1.1 Test的使用场景 - 数值比较"></a>1.1.1 Test的使用场景 - 数值比较</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">a=$1</span><br><span class="line">b=$2</span><br><span class="line">if test $a -eq $b</span><br><span class="line">then </span><br><span class="line">	echo &quot;a=b&quot;</span><br><span class="line">fi</span><br><span class="line">if test $a -ne $b</span><br><span class="line">then </span><br><span class="line">	echo &quot;a!=b&quot;</span><br><span class="line">fi</span><br><span class="line">if test $a -gt $b</span><br><span class="line">then </span><br><span class="line">	echo &quot;a&gt;b&quot;</span><br><span class="line">fi</span><br><span class="line">if test $a -lt $b</span><br><span class="line">then </span><br><span class="line">	echo &quot;a&lt;b&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250306203247989.png"></p>
<ul>
<li>test命令不能用于浮点值比较</li>
<li>(())数值比较采用：&#x3D;、&gt;、&lt;、&gt;&#x3D;、&lt;&#x3D;</li>
</ul>
<h4 id="1-1-2-Test的使用场景-字符串比较"><a href="#1-1-2-Test的使用场景-字符串比较" class="headerlink" title="1.1.2 Test的使用场景 - 字符串比较"></a>1.1.2 Test的使用场景 - 字符串比较</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">str1=$1</span><br><span class="line">str2=$2</span><br><span class="line">if test -n &quot;str1&quot;</span><br><span class="line">then</span><br><span class="line">	if test -n &quot;str2&quot;</span><br><span class="line">	then</span><br><span class="line">		if test &quot;$str1&quot;=&quot;$str2&quot;</span><br><span class="line">		then</span><br><span class="line">			echo &quot;str1=str2&quot;</span><br><span class="line">		fi</span><br><span class="line">		if test &quot;$str1&quot;!=&quot;$str2&quot;</span><br><span class="line">		then</span><br><span class="line">		echo &quot;str1!=str2&quot;</span><br><span class="line">		fi</span><br><span class="line">	elif test -z &quot;$str2&quot;</span><br><span class="line">	then</span><br><span class="line">		echo &quot;str2 is null&quot;</span><br><span class="line">	fi</span><br><span class="line">	elif test -z &quot;$test1&quot;</span><br><span class="line">	then</span><br><span class="line">		echo &quot;str1 is null&quot;</span><br><span class="line">	fi</span><br><span class="line">	 </span><br><span class="line">	</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250306203814424.png"><br>字符串中小于和大于比较，需要在&lt;和&gt;之前使用转义字符，例如：<code>if test “$str1” \&gt;“$str2”。</code></p>
<h4 id="1-1-3-Test的使用场景-文件比较"><a href="#1-1-3-Test的使用场景-文件比较" class="headerlink" title="1.1.3 Test的使用场景 - 文件比较"></a>1.1.3 Test的使用场景 - 文件比较</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if test -d my_dir</span><br><span class="line">then</span><br><span class="line">	echo &quot;It is  a directory&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if test -f string.sh;then echo &quot;It is a file&quot;;fi</span><br><span class="line">if test -e string.sh;then echo &quot;This file exists&quot;;fi</span><br><span class="line">if test -r string.sh;then echo &quot;This file can be read&quot;;fi</span><br><span class="line">if test -w string.sh;then echo &quot;This file can be write&quot;;fi</span><br><span class="line">if test -x string.sh;then echo &quot;This file can be executed&quot;;fi</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250306204209533.png"></p>
<ul>
<li>文件新旧比较，旧意味着文件创建时间更早：<ul>
<li>file1 -nt file2：检查file1是否比file2新</li>
<li>file1 -ot file2：检查file1是否比file2旧</li>
</ul>
</li>
<li>-s：判断文件是否存在并且非空</li>
</ul>
<h4 id="1-1-4-Test的使用场景-逻辑判断"><a href="#1-1-4-Test的使用场景-逻辑判断" class="headerlink" title="1.1.4 Test的使用场景 - 逻辑判断"></a>1.1.4 Test的使用场景 - 逻辑判断</h4><p>逻辑判断可以通过-a或-o实现：</p>
<ul>
<li>test 表达式1 -a 表达式2</li>
<li>test 表达式1 -o 表达式2</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if test 1 -eq 1 -a 2 -eq 2;then echo &quot;ok&quot;;fi </span><br><span class="line">if test !1 -eq1 -a 2 -eq 2;then echo &quot;ok&quot;;fi</span><br><span class="line">if test 1 -eq 2 -o 2 -eq 2;then echo &quot;ok&quot;;fi</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250306204546712.png"></p>
<h3 id="1-2-中括号条件判断的使用"><a href="#1-2-中括号条件判断的使用" class="headerlink" title="1.2 中括号条件判断的使用"></a>1.2 中括号条件判断的使用</h3><ul>
<li>中括号命令具有test标准的数值比较和字符串比较功能，与test功能一致</li>
<li>语法结构: <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ expression ]</span><br></pre></td></tr></table></figure></li>
<li>expression前后需要有一个空格</li>
</ul>
<h3 id="1-3-双中括号条件判断的使用"><a href="#1-3-双中括号条件判断的使用" class="headerlink" title="1.3 双中括号条件判断的使用"></a>1.3 双中括号条件判断的使用</h3><ul>
<li>双中括号命令提供了针对字符串比较的高级特性</li>
<li>语法结构:<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ expression ]]</span><br></pre></td></tr></table></figure></li>
<li>expression前后需要有一个空格</li>
<li>双中括号里的expression使用了test命令中采用的标准字符串比较。也提供了test命令未提供的另一个特性-模式匹配(pattern matching)</li>
</ul>
<h3 id="1-4-双括号条件判断的使用"><a href="#1-4-双括号条件判断的使用" class="headerlink" title="1.4 双括号条件判断的使用"></a>1.4 双括号条件判断的使用</h3><p>双括号命令允许在比较过程中使用高级数学表达式<br>语法结构:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((expression))</span><br></pre></td></tr></table></figure>
<p>expression可以是任意的数学赋值或比较表达式。除了test命令使用的标准数学运算符，右表列出了双括号命令中会用到的其他运算符<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250306204819095.png"><br>双括号语法结构类似C语言</p>
<h3 id="1-5-括号逻辑判断简介"><a href="#1-5-括号逻辑判断简介" class="headerlink" title="1.5 括号逻辑判断简介"></a>1.5 括号逻辑判断简介</h3><ul>
<li><code>[]、[[]]、(())</code>也可进行逻辑判断，通过但语句判断来控制运行</li>
<li><code>a&amp;&amp;b</code>：a为真，才执行b</li>
<li><code>a||b</code>：a为假，才执行b</li>
<li>多个<code>&amp;&amp;</code>或<code>||</code>组合使用时，判断如下：<ul>
<li><code>&amp;&amp;</code>前面命令执行成功，才会执行下一条命令</li>
<li><code>||</code>前面命令执行成功，后面的命令就不再执行</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250306205111188.png"><br>命令执行成功，表示为真，如“echo a” 为真</p>
<h3 id="1-6-条件判断语法结构总结"><a href="#1-6-条件判断语法结构总结" class="headerlink" title="1.6 条件判断语法结构总结"></a>1.6 条件判断语法结构总结</h3><ul>
<li>条件判断用于流程控制语句中的判断条件</li>
<li>语法结构：<ul>
<li><code>test 表达式</code>：<code>test 1 -eq 1</code></li>
<li>中括号<code>[表达式]</code>表达式前后必须各有一个空格:<code>[ 1 -eq 1 ]</code></li>
<li>双中括号[[表达式 ]]，相比单中括号支持的特性更多，表达式同样前后必须各有一个空格:<code>[[ 1-eq1 ]]</code></li>
<li>类C风格，<code>双括号((表达式))</code>，表达式前后没有空格:<code>((1==1))</code></li>
</ul>
</li>
</ul>
<h3 id="1-7-条件判断用于for循环嵌套"><a href="#1-7-条件判断用于for循环嵌套" class="headerlink" title="1.7 条件判断用于for循环嵌套"></a>1.7 条件判断用于for循环嵌套</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@openEluer ~]# cat for.sh</span><br><span class="line">for i in 1 2 3</span><br><span class="line">do</span><br><span class="line">	for j in A B C</span><br><span class="line">	do</span><br><span class="line"><span class="meta prompt_">		if[$</span><span class="language-bash">i -eq1]</span></span><br><span class="line">		then</span><br><span class="line">			echo &quot;$j is one year old now.&quot;</span><br><span class="line">		elif [ $i -eq 2 ]</span><br><span class="line">		then</span><br><span class="line">			echo &quot;$j is two years old now.&quot;</span><br><span class="line">		elif [ $i -eq 3 ]</span><br><span class="line">		then</span><br><span class="line">			echo &quot;$j is three years old now.&quot;</span><br><span class="line">		else</span><br><span class="line">			echo &quot;l don&#x27;t know how old he is.&quot;</span><br><span class="line">		fi</span><br><span class="line">	done</span><br><span class="line">		if [$i -lt 3]</span><br><span class="line">		then</span><br><span class="line">			echo &quot;Happy New Year!&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250306205903378.png"></p>
<h3 id="1-8-条件判断用于while循环嵌套"><a href="#1-8-条件判断用于while循环嵌套" class="headerlink" title="1.8 条件判断用于while循环嵌套"></a>1.8 条件判断用于while循环嵌套</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">i=1 </span><br><span class="line">while [$i -le 9]</span><br><span class="line">do </span><br><span class="line">	j=1</span><br><span class="line">	while [$j -le $i]</span><br><span class="line">	do	</span><br><span class="line">		echo -n &quot;$i*$j=$[i*j]&quot;</span><br><span class="line">		let j++;</span><br><span class="line">	done</span><br><span class="line">	let i++</span><br><span class="line">	echo &quot;&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250306210127305.png"></p>
<h2 id="0x02-Shell脚本中的函数"><a href="#0x02-Shell脚本中的函数" class="headerlink" title="0x02 Shell脚本中的函数"></a>0x02 Shell脚本中的函数</h2><h3 id="2-1-函数结构简介"><a href="#2-1-函数结构简介" class="headerlink" title="2.1 函数结构简介"></a>2.1 函数结构简介</h3><ul>
<li>Shell允许将一组命令或语句形成一段代码块，这段代码块称为Shell函数，并且可以用函数名调用这段代码块</li>
<li>语法结构:<ul>
<li>标准定义<code>function fun()&#123;&#125;</code>，两种简洁定义<code>fun()&#123;&#125;</code>、<code>function fun&#125;</code>，括号内不带任何参数</li>
<li>函数需要先定义再调用</li>
</ul>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function hello()&#123;</span><br><span class="line">	echo &quot;Hello&quot;</span><br><span class="line">&#125;</span><br><span class="line">world()&#123;</span><br><span class="line">	echo &quot;World&quot;</span><br><span class="line">	return 2</span><br><span class="line">&#125;</span><br><span class="line">hello</span><br><span class="line">echo $?</span><br></pre></td></tr></table></figure>
<p>使用source执行脚本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">source</span>执行fun.sh可以将脚本中的函数或变量加载到当前shell中[root@openEluer ~]# <span class="built_in">source</span> fun.sh</span></span><br><span class="line">Hello</span><br><span class="line">[root@openEluer ~]# world</span><br><span class="line">World</span><br><span class="line">[root@openEluer ~]# echo $?</span><br><span class="line">2</span><br><span class="line">[root@openEluer ~]#</span><br></pre></td></tr></table></figure>
<p>常用的语法结构为简介定义<code>func()&#123;&#125;</code></p>
<h3 id="2-2-函数退出状态码设置"><a href="#2-2-函数退出状态码设置" class="headerlink" title="2.2 函数退出状态码设置"></a>2.2 函数退出状态码设置</h3><ul>
<li>Return命令用于退出函数并返回特定的退出状态码。Return命令允许指定一个整数值来定义函数的退出状态码，退出状态码必须是0~255</li>
<li><code>$?</code>变量会返回执行的最后一条命令的退出状态码</li>
<li>函数结束立即使用<code>$?</code>查看返回值，如果在用<code>$?</code>变量提取函数返回值之前执行了其他命令函数的返回值就会丢失</li>
<li>默认退出状态码：<ul>
<li>0：命令执行成功</li>
<li>1：一般性未知错误</li>
<li>2：命令参数使用错误</li>
</ul>
</li>
</ul>
<h3 id="2-3-函数查看与删除"><a href="#2-3-函数查看与删除" class="headerlink" title="2.3 函数查看与删除"></a>2.3 函数查看与删除</h3><ul>
<li>Set命令可以查看当前shell中所有的变量和函数</li>
<li>Unset命令可以删除当前shell中的某个变量或函数</li>
<li>Declare -F可以查看函数列表，declare -f可以查看函数的具体定义<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250306211020729.png"></li>
</ul>
<h3 id="2-4-函数的输出值读取"><a href="#2-4-函数的输出值读取" class="headerlink" title="2.4 函数的输出值读取"></a>2.4 函数的输出值读取</h3><p>如果函数定义了运行结束后的输出，可通过echo来读取该输出值例如，将在函数dbl的输出值赋给变量result:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@openEluer ~]# cat test.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">function dbl &#123;</span><br><span class="line">	read -p &quot;Enter a value: &quot; value</span><br><span class="line">	echo $[ $value * 2 ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">result=$(dbl)</span><br><span class="line">echo &quot;The new value is $result&quot;</span><br><span class="line">[root@openEluer ~]# sh test.sh</span><br><span class="line">Enter a value:200</span><br><span class="line">The new value is 400</span><br></pre></td></tr></table></figure>
<p>函数会用echo语句来显示计算的结果。该脚本会获取dbl函数的输出，而不是查看退出状态码。</p>
<h3 id="2-5-函数的传参与递归"><a href="#2-5-函数的传参与递归" class="headerlink" title="2.5 函数的传参与递归"></a>2.5 函数的传参与递归</h3><ul>
<li>函数传参和脚本传参一致，使用$n表示第n个参数</li>
<li>函数体里面可以调用函数本身，实现函数的递归调用</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">fun2.sh:</span></span><br><span class="line"></span><br><span class="line">myfun()&#123;</span><br><span class="line">	if [ $1 -eq 1 ]</span><br><span class="line">	then</span><br><span class="line">		echo 1</span><br><span class="line">	else</span><br><span class="line">		temp=$[$1-1]</span><br><span class="line">		result=$(myfun $temp)</span><br><span class="line">		echo $[$1*$result]</span><br><span class="line">	fi</span><br><span class="line">&#125;</span><br><span class="line">echo &quot;$(myfun 5)&quot;</span><br></pre></td></tr></table></figure>
<p>运行该脚本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">[root@openEuler~]#</span><span class="language-bash">bash fun2.sh</span></span><br><span class="line">120</span><br></pre></td></tr></table></figure>

<h3 id="2-6-函数库的文件"><a href="#2-6-函数库的文件" class="headerlink" title="2.6 函数库的文件"></a>2.6 函数库的文件</h3><ul>
<li>bash shell允许创建函数库文件，然后在多个脚本中引用该库文件<br>创建库函数文件<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">myfuns</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">my script <span class="built_in">functions</span></span></span><br><span class="line"></span><br><span class="line">function addem</span><br><span class="line">&#123;</span><br><span class="line">	echo $[ $1 + $2 ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
运行库函数文件<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">test.sh</span></span><br><span class="line">../myfuncs</span><br><span class="line">value1=10</span><br><span class="line">value2=5</span><br><span class="line">result1=$(addem $value1 $value2)</span><br><span class="line">echo &quot;The result of adding them is $result1&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="0x03-GREP命令使用简介"><a href="#0x03-GREP命令使用简介" class="headerlink" title="0x03 GREP命令使用简介"></a>0x03 GREP命令使用简介</h2><h3 id="3-1-Grep命令简介"><a href="#3-1-Grep命令简介" class="headerlink" title="3.1 Grep命令简介"></a>3.1 Grep命令简介</h3><ul>
<li>Grep（Globally search a Regular Expression and Print 全局搜索正则表达式）是一种文本搜索工具，它能根据模式对目标进行逐行搜索，并将结果输出显示</li>
<li>语法结构：<code>grep [选项] 匹配模式 文件/数据</code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看源文件</span></span><br><span class="line">cat grep_test.txt</span><br><span class="line">aaaaa</span><br><span class="line">cccccc</span><br><span class="line">aaaaaa bbbbbb</span><br><span class="line">aa bb</span><br><span class="line">[root@openEuler~]grep -c aaaa grep_test.txt</span><br><span class="line">2</span><br></pre></td></tr></table></figure></li>
<li>grep在一个或多个文件中搜索字符串模板，搜索的结果被送到标准输出，不影响原文件内容。</li>
<li>grep可用于shell脚本，因为grep通过返回一个状态值来说明搜索的状态，如果模板搜索成功，则返回0，如果搜索不成功，则返回1，如果搜索的文件不存在，则返回2。利用这些返回值就可进行一些自动化的文本处理工作</li>
</ul>
<h3 id="3-2-Grep命令选项概览"><a href="#3-2-Grep命令选项概览" class="headerlink" title="3.2 Grep命令选项概览"></a>3.2 Grep命令选项概览</h3><ul>
<li>通过grep -help命令查看所有选项</li>
<li>grep命令选项包含以下几类<ul>
<li>模式选择类</li>
<li>输出控制类</li>
<li>上下文控制类</li>
<li>其他类</li>
</ul>
</li>
</ul>
<h4 id="3-2-1-Grep输出控制选项"><a href="#3-2-1-Grep输出控制选项" class="headerlink" title="3.2.1 Grep输出控制选项"></a>3.2.1 Grep输出控制选项</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250307172854987.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250307173027784.png"><br>grep_test的文本内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">aaaaa</span><br><span class="line">cccccc</span><br><span class="line">aaaaaa bbbbbb</span><br><span class="line">aa bb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]grep -m1 aaa grep_test.txt</span><br><span class="line">aaaaa</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]grep -n aaa grep_test.txt</span><br><span class="line">1:aaaaaa</span><br><span class="line">3:aaaaaa bbbbbb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]grep -c aaa grep_test.txt</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]grep -v a grep_test.txt</span><br><span class="line">ccccc</span><br><span class="line">AAAAA bbbbbb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]grep -o aaaa grep_test.txt</span><br></pre></td></tr></table></figure>

<p>grep_test.txt&amp;grep_test2.txt:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]cat grep_test.txt</span><br><span class="line">aaaaaa</span><br><span class="line">cccccc</span><br><span class="line">aaaaaa bbbbbb</span><br><span class="line">aa bb</span><br><span class="line">AAAAAA bbbbbb</span><br><span class="line">[root@openEuler~]cat grep_test2.txt</span><br><span class="line">abcd</span><br><span class="line">acde</span><br></pre></td></tr></table></figure>


<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]grep -H aaa grep_test.txt</span><br><span class="line">grep_test.txt:aaaaaa</span><br><span class="line">grep_test.txt:aaaaaa bbbbbb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]grep -l aaa grep_test.txt</span><br><span class="line">grep_test.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]grep -L aaa grep_test.txt</span><br><span class="line">grep_test2.txt</span><br><span class="line">grep_test2.txt</span><br></pre></td></tr></table></figure>


<h4 id="3-2-2-Grep上下文控制选项"><a href="#3-2-2-Grep上下文控制选项" class="headerlink" title="3.2.2 Grep上下文控制选项"></a>3.2.2 Grep上下文控制选项</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250307212740576.png"><br>grep_test.txt内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]cat grep_test.txt</span><br><span class="line">aaaaaa</span><br><span class="line">cccccc</span><br><span class="line">aaaaaa bbbbbb</span><br><span class="line">aa bb</span><br><span class="line">AAAAAA bbbbbb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler] grep -A1 cccc grep_test.txt</span><br><span class="line">cccccc</span><br><span class="line">aaaaaa bbbbbb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]grep -B1 cccc grep_test.txt</span><br><span class="line">aaaaaa</span><br><span class="line">cccccc0</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]grep -C1 cccc grep_test.txt</span><br><span class="line">aaaaaa</span><br><span class="line">cccccc</span><br><span class="line">aaaaaa bbbbbb</span><br></pre></td></tr></table></figure>

<h4 id="3-2-3-Grep模式选择选项"><a href="#3-2-3-Grep模式选择选项" class="headerlink" title="3.2.3 Grep模式选择选项"></a>3.2.3 Grep模式选择选项</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]cat grep_test.txt</span><br><span class="line">aaaaaa</span><br><span class="line">cccccc</span><br><span class="line">aaaaaa bbbbbb</span><br><span class="line">aa bb</span><br><span class="line">AAAAAA bbbbbb</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250307213339752.png"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]grep -w aa grep_test.txt</span><br><span class="line">aa bb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]grep -x aaaaaa grep_test.txt</span><br><span class="line">aaaaaa</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]grep -i aaa grep_test.txt</span><br><span class="line">aaaaaa</span><br><span class="line">aaaaaa bbbbbb</span><br><span class="line">AAAAAA bbbbbb</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -E &#x27;a&#123;3,5&#125;&#x27; grep_test.txt</span><br><span class="line">aaaaaa</span><br><span class="line">aaaaaa bbbbbb</span><br></pre></td></tr></table></figure>

<h3 id="3-3-正则表达式简介"><a href="#3-3-正则表达式简介" class="headerlink" title="3.3 正则表达式简介"></a>3.3 正则表达式简介</h3><ul>
<li>正则表达式描述了一种字符串匹配的模式，使用字符串来描述、匹配一系列符合某个规则的字符串</li>
<li>支持的命令：<code>locate | find | vim | grep | sed |awk</code>等，例如：<ul>
<li><code>grep [0-9a-zA-Z] test.txt</code></li>
<li><code>sed &#39;/[0-9a-zA-Z]/&#39; test.txt</code></li>
<li><code>awk &#39;/[0-9a-zA-z]/&#39; test.txt</code></li>
</ul>
</li>
<li>普通字符：大小写字母、数字、标点符号及一些其他符号<ul>
<li>示例：<code>grep aaa grep_test.txt</code></li>
</ul>
</li>
<li>普通元字符：在正则表达式中具有特殊意义的专用字符<ul>
<li>示例：<code>grep &#39;^a&#39; grep_test.txt</code></li>
</ul>
</li>
<li>扩展元字符：扩展的元字符，使用时需要使用转义字符或添加特殊选项<ul>
<li>示例1：&#96;grep ‘a|b’ grep_test.txt</li>
<li>示例2：&#96;grep -E ‘a|b’ grep_test.txt</li>
</ul>
</li>
<li>正则表达式由三部分组成：字符类，数量限定符，位置限定符</li>
</ul>
<p>P361</p>
<h2 id="0x04-SED流编辑器简介"><a href="#0x04-SED流编辑器简介" class="headerlink" title="0x04 SED流编辑器简介"></a>0x04 SED流编辑器简介</h2><h3 id="4-1-Sed功能与运行原理"><a href="#4-1-Sed功能与运行原理" class="headerlink" title="4.1 Sed功能与运行原理"></a>4.1 Sed功能与运行原理</h3><ul>
<li>Sed（Stream Editor流编辑器），用于文件处理</li>
<li>Sed逐行处理内容，将当前行存储在临时缓冲区中，用sed命令处理缓冲区的内容，输出到屏幕</li>
<li>语法结构：<ul>
<li>&#96;sed [选项]’[定位符]命令’ 文件</li>
<li><code>sed [选项] -f 脚本名.sed 文件</code></li>
<li>.&#x2F;脚本名.sed 文件</li>
</ul>
</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250307233058613.png"></li>
<li>sed主要用来自动编辑一个或者多个文件；简化对文件的反复操作；编写转换程序等。主要用来将数据进行增、删、改、查操作</li>
<li>sed一次一行的设计优点，读非常大的文件不会出问题，如果全部读取可能会内存溢出或处理速度非常慢</li>
<li>sed可以使用重定向存储输出，但不能重定向输出到原始文件。</li>
</ul>
<h3 id="4-2-Sed参数选项"><a href="#4-2-Sed参数选项" class="headerlink" title="4.2 Sed参数选项"></a>4.2 Sed参数选项</h3><ul>
<li>Sed -h可以查看sed的选项列表</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250307235904105.png"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler~]sed &#x27;1p&#x27; sed.txt</span><br><span class="line">I am Sopia</span><br><span class="line">I am Sopia</span><br><span class="line">[root@openEuler~]sed -n &#x27;1p&#x27; sed.txt</span><br><span class="line">I am Sopia</span><br><span class="line">[root@openEuler~]sed -e &#x27;1p&#x27; -e &#x27;1i hello&#x27; sed.txt</span><br><span class="line">I am Sopia</span><br><span class="line">hello</span><br><span class="line">I am Sopia</span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308113307469.png"></li>
</ul>
<h3 id="4-3-Sed的应用-行号定位"><a href="#4-3-Sed的应用-行号定位" class="headerlink" title="4.3 Sed的应用 - 行号定位"></a>4.3 Sed的应用 - 行号定位</h3><ul>
<li>行号使用数字定位，逗号、波浪号、加号用于行号操作<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]sed -n &#x27;3p&#x27; sed2.txt          #打印第三行</span><br><span class="line">333</span><br><span class="line">[root@openEuler]sed -n &#x27;1,3p&#x27; sed2.txt        #打印1-3行</span><br><span class="line">1</span><br><span class="line">22</span><br><span class="line">333</span><br><span class="line">[root@openEuler]sed -n &#x27;2-2p&#x27; sed2.txt       #从第2行开始，步长为2</span><br><span class="line">22</span><br><span class="line">4444</span><br><span class="line">666666 </span><br><span class="line">[root@openEuler]sed -n &#x27;2,+3p&#x27; sed2.txt     #第2行， 以及后面3行</span><br><span class="line">22</span><br><span class="line">333</span><br><span class="line">4444</span><br><span class="line">555555</span><br><span class="line">[root@openEuler]sed -n &#x27;/33/=&#x27; sed2.txt     #打印内容所在行号</span><br><span class="line">3</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308113321815.png"></li>
</ul>
<h3 id="4-4-Sed的应用-正则定位"><a href="#4-4-Sed的应用-正则定位" class="headerlink" title="4.4 Sed的应用 - 正则定位"></a>4.4 Sed的应用 - 正则定位</h3><ul>
<li>正则定位使用“&#x2F;”左右包含正则表达式，扩展正则使用”-r”选项<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]grep 1 sed2.txt</span><br><span class="line">1</span><br><span class="line">[root@openEuler]sed -n &#x27;/1/p&#x27; sed2.txt</span><br><span class="line">1</span><br><span class="line">[root@openEuler]grep -E &#x27;[0-9]&#123;3&#125;&#x27; sed2.txt</span><br><span class="line">333</span><br><span class="line">4444</span><br><span class="line">55555</span><br><span class="line">666666</span><br><span class="line">[root@openEuler]sed -rn &#x27;/[0-9]&#123;3&#125;/p&#x27; sed2.txt</span><br><span class="line">333</span><br><span class="line">4444</span><br><span class="line">55555</span><br><span class="line">666666</span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308113443090.png"></li>
</ul>
<h3 id="4-5-Sed的应用-文本的增删改查"><a href="#4-5-Sed的应用-文本的增删改查" class="headerlink" title="4.5 Sed的应用 - 文本的增删改查"></a>4.5 Sed的应用 - 文本的增删改查</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308113643628.png"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]sed &#x27;ihello&#x27; sed2.txt                  #每一行前增加hello</span><br><span class="line">hello</span><br><span class="line">1</span><br><span class="line">hello</span><br><span class="line">22</span><br><span class="line">[root@openEuler]sed &#x27;1ihello&#x27; sed2.txt                 #第一行前增加hello</span><br><span class="line">hello</span><br><span class="line">1</span><br><span class="line">22</span><br><span class="line">[root@openEuler]sed &#x27;1ahello&#x27; sed2.txt                 #第一行后增加hello</span><br><span class="line">1</span><br><span class="line">hello</span><br><span class="line">22</span><br><span class="line">[root@openEuler]sed &#x27;1d&#x27; sed2.txt                      #删除第一行</span><br><span class="line">22</span><br><span class="line">[root@openEuler]sed &#x27;1chello&#x27; sed2.txt                 #替换第一行为hello</span><br><span class="line">hello</span><br><span class="line">22</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308113649959.png"></p>
<h3 id="4-6-Sed的应用-文本内容的搜索替换"><a href="#4-6-Sed的应用-文本内容的搜索替换" class="headerlink" title="4.6 Sed的应用 - 文本内容的搜索替换"></a>4.6 Sed的应用 - 文本内容的搜索替换</h3><ul>
<li>sed选项’s&#x2F;搜索的内容&#x2F;替换的内容&#x2F;动作’文件</li>
<li>内容有&#x2F;时，分隔符可以用@、#等自定义。&amp;可以保存查找串以便在替换串中引用<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]sed &#x27;s/2/hello&#x27; sed2.txt               #替换行中第一个2为hello</span><br><span class="line">1</span><br><span class="line">hello2</span><br><span class="line">/root/</span><br><span class="line">[root@openEuler]sed &#x27;s/2/hello/g&#x27; sed2.txt             #替换行中全部2为hello</span><br><span class="line">1</span><br><span class="line">hellohello</span><br><span class="line">[root@openEuler]sed &#x27;s@/root/@hello@&#x27; sed2.txt         #替换/root/为hello</span><br><span class="line">1</span><br><span class="line">22</span><br><span class="line">hello</span><br><span class="line">[root@openEuler]sed &#x27;s/2/&amp;hello&#x27; sed2.txt</span><br><span class="line">1</span><br><span class="line">2hello2</span><br><span class="line">/root/</span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308114229619.png"></li>
</ul>
<h3 id="4-7-Sed的应用-文件操作"><a href="#4-7-Sed的应用-文件操作" class="headerlink" title="4.7 Sed的应用 - 文件操作"></a>4.7 Sed的应用 - 文件操作</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308114817543.png"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将sed.txt中内容插入到sed2.txt第1行之后</span></span><br><span class="line">[root@openEuler]sed &#x27;1r sed.txt&#x27; sed2.txt</span><br><span class="line">1</span><br><span class="line">hello world</span><br><span class="line">I am Sopia</span><br><span class="line">I am 3 years old</span><br><span class="line">22</span><br><span class="line">/root/</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将sed2.txt中第一行另存到sed.txt中</span></span><br><span class="line">[root@openEuler]sed &#x27;1w sed.txt&#x27; sed2.txt</span><br><span class="line">1</span><br><span class="line">22</span><br><span class="line">/root/</span><br><span class="line">[root@openEuler]cat sed.txt</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308115010144.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308114941051.png"></p>
<h3 id="4-8-Sed的应用-归组"><a href="#4-8-Sed的应用-归组" class="headerlink" title="4.8 Sed的应用 - 归组"></a>4.8 Sed的应用 - 归组</h3><ul>
<li>Sed命令中的大括号用于以下两个目的：<ul>
<li>范围包含在另一个范围中（嵌套）</li>
<li>对同一个范围执行多个命令或者操作（归组）<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308115208403.png"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler]sed &#x27;/start/,/end/&#123;/philly/,/nyc/s/dc/distrit/g&#125;&#x27;</span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308115318653.png"></li>
</ul>
</li>
</ul>
<h3 id="4-9-Sed的应用-表达式串行"><a href="#4-9-Sed的应用-表达式串行" class="headerlink" title="4.9 Sed的应用 - 表达式串行"></a>4.9 Sed的应用 - 表达式串行</h3><ul>
<li>多个表达式串行有以下两种表示方法：<ul>
<li>sed ‘表达式;表达式’</li>
<li>-e选项允许在同一行里执行多条命令，命令的执行顺序</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308115548130.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308115553484.png"></p>
<h2 id="0x05-AWK语句简介"><a href="#0x05-AWK语句简介" class="headerlink" title="0x05 AWK语句简介"></a>0x05 AWK语句简介</h2><h3 id="5-1-Awk简介"><a href="#5-1-Awk简介" class="headerlink" title="5.1 Awk简介"></a>5.1 Awk简介</h3><ul>
<li>Awk是一种编程语言，主要用于在Linux&#x2F;Unix下对文本或数据进行处理，数据可以来自标准输出、一个或多个文件、其他命令的输出</li>
<li>Awk逐行扫描。寻找匹配模式的行，并在行上进行处理，支持条件判断，支持for和while循环</li>
<li>语法结构：<ul>
<li><code>awk 选项 ‘模式（动作）’ 文件</code></li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308161555648.png"></li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308162948683.png"></li>
<li>awk使用一行作为输入，并将这一行赋给内部变量$0，每一行也可以称为一个记录，以换行符RS结束</li>
<li>每行被间隔符（默认空格或制表符）分解成字段，每个字段存储在已编号的变量中，从$1开始</li>
<li>awk使用print函数打印字段，打印出来的字段会以空格分割，因为$1,$3之间有一个逗号，逗号比较特殊，它映射为另一个内部变量，称为输出字段分隔符OFS，OFS默认为空格</li>
<li>awk处理完一行后，从文件中获取另一行，并存储在$0中，覆盖原来的内容，然后将新的字符串分割成字段并处理</li>
</ul>
</li>
</ul>
<h3 id="5-2-Awk的模式和动作"><a href="#5-2-Awk的模式和动作" class="headerlink" title="5.2 Awk的模式和动作"></a>5.2 Awk的模式和动作</h3><ul>
<li>语法结构：<ul>
<li><code>awk -F 分隔符 &#39;模式&#123;动作&#125;模式&#123;动作&#125;模式&#123;动作&#125;&#39; 输入文件</code></li>
<li><code>awk -F 分隔符 &#39;模式&#123;动作&#125; 模式&#123;动作&#125; 模式&#123;动作&#125;&#39; 输入文件</code>‘&#96;</li>
<li>&#96;&#96;awk -F 分隔符 ‘模式{动作};模式{动作};模式{动作}’ 输入文件<code>&#39;</code></li>
</ul>
</li>
<li>模式和动作组合在一起形成一条指令。整个指令用单引号包含，指令之间可紧挨在一起，也可用空格或分号隔开，但是一条指令则不需要加分号</li>
<li>模式和动作都是可选的，省略模式时默认匹配所有行；省略动作时默认为输出整行</li>
<li>有{}包裹的就是动作，没有包裹的就是模式</li>
</ul>
<h3 id="5-3-Awk的模式总览"><a href="#5-3-Awk的模式总览" class="headerlink" title="5.3 Awk的模式总览"></a>5.3 Awk的模式总览</h3><ul>
<li>模式决定动作语句何时出发及触发事件</li>
<li>模式可以是下面其中之一：<ul>
<li><code>BEGIN; END</code> 特殊模式</li>
<li>&#96;&#x2F;regular expression&#x2F; &#96;&#96; 正则表达式</li>
<li><code>relational expression</code>  关系比较表达式</li>
<li><code>pattern &amp;&amp; pattern; pattern || pattern; !pattern</code> 逻辑表达式</li>
<li><code>pattern?pattern:pattern</code>  三元表达式</li>
<li><code>(pattern)</code> 常量表达式，表达式为真时执行动作</li>
<li><code>pattern1,pattern2</code> 范围模式</li>
<li>如果省略模式部分，动作将时刻保持执行状态。即动作应用到全部记录。</li>
</ul>
</li>
</ul>
<h3 id="5-4-Awk的常用模式-正则表达式"><a href="#5-4-Awk的常用模式-正则表达式" class="headerlink" title="5.4 Awk的常用模式 - 正则表达式"></a>5.4 Awk的常用模式 - 正则表达式</h3><ul>
<li>内容匹配：<del>&#x2F;内容&#x2F;，!</del>&#x2F;内容&#x2F;</li>
<li>正则表达式：需要用一对“&#x2F;”包含<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308170312577.png"></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308170324079.png"></p>
<h3 id="5-5-Awk的常用模式-常量表达式"><a href="#5-5-Awk的常用模式-常量表达式" class="headerlink" title="5.5 Awk的常用模式 - 常量表达式"></a>5.5 Awk的常用模式 - 常量表达式</h3><ul>
<li>常量由字符串常量与数值常量组成，字符串常量含引号，而数值常量没用</li>
<li>凡是非0的数字，就表示pattern匹配成功，也就是pattern为真，否则表示匹配失败为假</li>
<li>凡是非空的字符串，就表示pattern匹配成功，也就是pattern为真，否则表示匹配失败为假</li>
<li><code>awk &#39;真&#123;执行代码 &#125;;假&#123;不执行代码&#125;&#39;</code></li>
<li>字符串是由引号引起来的。比如数字0与字符串“0”是不一样的。数字0为假，字符串“0”为真（不为空）。</li>
</ul>
<h3 id="5-6-awk字段分隔符"><a href="#5-6-awk字段分隔符" class="headerlink" title="5.6 awk字段分隔符"></a>5.6 awk字段分隔符</h3><ul>
<li>字段分隔符可以使用-F选项指定，也可以在模式BEGIN中的FS变量指定。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308170719007.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308170731997.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308170740904.png"></li>
</ul>
<h3 id="5-7-awk记录分隔符"><a href="#5-7-awk记录分隔符" class="headerlink" title="5.7 awk记录分隔符"></a>5.7 awk记录分隔符</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308170852426.png"></p>
<h3 id="5-8-Awk的动作总览"><a href="#5-8-Awk的动作总览" class="headerlink" title="5.8 Awk的动作总览"></a>5.8 Awk的动作总览</h3><ul>
<li>动作之间由换行符或分号隔开，并位于大括号内</li>
<li>动作语句包括:内置函数、变量或数组赋值、输入和输出语句、控制语句(条件和循环语句等)</li>
<li>如果省略动作，它就会有一个默认的action行为，即{print $0}，则输出匹配的全部记究</li>
</ul>
<h3 id="5-9-Awk的常用动作-内置函数"><a href="#5-9-Awk的常用动作-内置函数" class="headerlink" title="5.9 Awk的常用动作 - 内置函数"></a>5.9 Awk的常用动作 - 内置函数</h3><ul>
<li>awk函数分为内建函数和自定义函数</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308171022036.png"></li>
</ul>
<h3 id="5-10-Awk的动作-函数举例"><a href="#5-10-Awk的动作-函数举例" class="headerlink" title="5.10 Awk的动作 - 函数举例"></a>5.10 Awk的动作 - 函数举例</h3><ul>
<li>字符串替换函数使用举例</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308171146049.png"></li>
</ul>
<h3 id="5-11-Awk的常用动作-内置变量"><a href="#5-11-Awk的常用动作-内置变量" class="headerlink" title="5.11 Awk的常用动作 - 内置变量"></a>5.11 Awk的常用动作 - 内置变量</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308171220758.png"></p>
<h3 id="5-12-Awk的常用动作-自定义变量"><a href="#5-12-Awk的常用动作-自定义变量" class="headerlink" title="5.12 Awk的常用动作 - 自定义变量"></a>5.12 Awk的常用动作 - 自定义变量</h3><ul>
<li>格式 <code>awk &#123;action&#125;</code>，变量名&#x3D;变量值，输入文件名<code>awk &#39;&#123;print a,b&#125;&#39; a=111 b=222 filename</code><ul>
<li>变量位置在文件名之前，否则不能调用</li>
<li><code>BEGIN&#123;&#125;不能调用这些变量</code></li>
<li><code>-v定义变量并赋值，变量调用不加$</code></li>
</ul>
</li>
</ul>
<h3 id="5-13-Awk的使用场景-格式化输出"><a href="#5-13-Awk的使用场景-格式化输出" class="headerlink" title="5.13 Awk的使用场景 - 格式化输出"></a>5.13 Awk的使用场景 - 格式化输出</h3><ul>
<li>print类似echo，默认打印换行</li>
<li>printf类似echo -n，默认打印不换行，C语言风格<ul>
<li><code>%[flags][width][.precision]conversion</code></li>
<li>%标志 最小宽度 精度 转换符<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308171613304.png"></li>
</ul>
</li>
</ul>
<p>转换符：</p>
<ul>
<li>c ASCII字符(打印第一个字符)</li>
<li>s 字符串</li>
<li>d,i 十进制整数</li>
<li>u 无符号十进制整数</li>
<li>x 无符号十六进制整数，a-f表示10-15</li>
<li>X 无符号十六进制整数，A-F表示10-15</li>
<li>o 无符号八进制整数</li>
<li>e,E 浮点数科学记数法(e 记数法)</li>
<li>f,F 浮点数</li>
<li>g %e 或 %f, 取决于哪个更短, 删除尾部0</li>
<li>G %E 或 %f, 取决于哪个更短, 删除尾部0</li>
<li><code>%% %自身</code></li>
</ul>
<p>标志</p>
<ul>
<li><code>-</code>左对齐</li>
<li><code>space</code> 用于数字转换，在正数之前添加空格，负数之前添加负数</li>
<li><code>+</code> 打印正负数符号</li>
<li><code>#</code> 对于%o添加前缀0</li>
<li>对于%x添加前缀0x</li>
<li>对于%X添加前缀0X</li>
<li>对于%e,%E,%f添加小数点</li>
<li>对于%g,%G不删除尾部0</li>
<li>0 用0而不是空白符来填充所显示的值</li>
</ul>
<h4 id="5-13-1-printf精度"><a href="#5-13-1-printf精度" class="headerlink" title="5.13.1 printf精度"></a>5.13.1 printf精度</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308171844529.png"></p>
<h3 id="5-14-Awk的使用场景-控制语句"><a href="#5-14-Awk的使用场景-控制语句" class="headerlink" title="5.14 Awk的使用场景 - 控制语句"></a>5.14 Awk的使用场景 - 控制语句</h3><p>Awk中的控制语句条件测试使用单括号<code>&quot;()&quot;</code>包含<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308171935892.png"></p>
<h3 id="5-15-Awk的脚本模式"><a href="#5-15-Awk的脚本模式" class="headerlink" title="5.15 Awk的脚本模式"></a>5.15 Awk的脚本模式</h3><ul>
<li>脚本里存放命令清单，不需要使用引号包含命令，多个命令用分号分隔</li>
<li><code>awk -f awk.sh 文件</code></li>
<li>.&#x2F;awk.sh 文件名</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/file-20250308172051169.png"></li>
</ul>
<h2 id="0x06-本章总结"><a href="#0x06-本章总结" class="headerlink" title="0x06 本章总结"></a>0x06 本章总结</h2><p>本章主要讲述了Shell的进阶功能，包括条件判断、函数、正则表达式，以及常用的Linux命令工具grep、sed、awk。</p>
<ul>
<li>grep:擅长数据查找定位</li>
<li>sed:擅长数据修改</li>
<li>awk:擅长数据切片，数据格式化，功能最复杂</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">XBCID</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/03/06/openEuler/%E7%AC%94%E8%AE%B0/IP/05%20shell%E8%84%9A%E6%9C%AC%E8%BF%9B%E9%98%B6/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/03/06/openEuler/%E7%AC%94%E8%AE%B0/IP/05%20shell%E8%84%9A%E6%9C%AC%E8%BF%9B%E9%98%B6/')">05 shell脚本进阶</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/03/06/openEuler/%E7%AC%94%E8%AE%B0/IP/05%20shell%E8%84%9A%E6%9C%AC%E8%BF%9B%E9%98%B6/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=05 shell脚本进阶&amp;url=http://example.com/2025/03/06/openEuler/%E7%AC%94%E8%AE%B0/IP/05%20shell%E8%84%9A%E6%9C%AC%E8%BF%9B%E9%98%B6/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">XBCID's BLOG</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Linux<span class="tagsPageCount">18</span></a><a class="post-meta__box__tags" href="/tags/openEuler/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>openEuler<span class="tagsPageCount">18</span></a><a class="post-meta__box__tags" href="/tags/Huawei/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Huawei<span class="tagsPageCount">15</span></a><a class="post-meta__box__tags" href="/tags/HCIP/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>HCIP<span class="tagsPageCount">6</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/03/04/openEuler/%E7%AC%94%E8%AE%B0/IP/02%20openEuler%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">02 openEuler集群架构介绍</div></div></a></div><div class="next-post pull-right"><a href="/2025/03/08/openEuler/%E7%AC%94%E8%AE%B0/IP/06%20openEuler%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">06 openEuler操作系统安全加固</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IP/01%20openEuler%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86/" title="01 openEuler操作系统入门"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">01 openEuler操作系统入门</div></div></a></div><div><a href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IP/03%20openEuler%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/" title="03 openEuler存储管理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-05-19</div><div class="title">03 openEuler存储管理</div></div></a></div><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IP/04%20%E8%87%AA%E5%8A%A8%E5%8C%96%E7%AE%A1%E7%90%86/" title="04 自动化管理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">04 自动化管理</div></div></a></div><div><a href="/2025/03/08/openEuler/%E7%AC%94%E8%AE%B0/IP/06%20openEuler%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA/" title="06 openEuler操作系统安全加固"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-08</div><div class="title">06 openEuler操作系统安全加固</div></div></a></div><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/01%20openEuler%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%85%A5%E9%97%A8/" title="01 openEuler操作系统入门"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">01 openEuler操作系统入门</div></div></a></div><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/02%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C%E5%9F%BA%E7%A1%80/" title="02 命令行操作基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">02 命令行操作基础</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x01-Shell%E8%84%9A%E6%9C%AC%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E6%96%B9%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">0x01 Shell脚本中常用的条件判断方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-Test%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 Test条件判断简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-1-Test%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-%E6%95%B0%E5%80%BC%E6%AF%94%E8%BE%83"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.1.1 Test的使用场景 - 数值比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-2-Test%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83"><span class="toc-number">2.1.2.</span> <span class="toc-text">1.1.2 Test的使用场景 - 字符串比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-3-Test%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-%E6%96%87%E4%BB%B6%E6%AF%94%E8%BE%83"><span class="toc-number">2.1.3.</span> <span class="toc-text">1.1.3 Test的使用场景 - 文件比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-4-Test%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD"><span class="toc-number">2.1.4.</span> <span class="toc-text">1.1.4 Test的使用场景 - 逻辑判断</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E4%B8%AD%E6%8B%AC%E5%8F%B7%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 中括号条件判断的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%8F%8C%E4%B8%AD%E6%8B%AC%E5%8F%B7%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 双中括号条件判断的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E5%8F%8C%E6%8B%AC%E5%8F%B7%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.4.</span> <span class="toc-text">1.4 双括号条件判断的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-%E6%8B%AC%E5%8F%B7%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD%E7%AE%80%E4%BB%8B"><span class="toc-number">2.5.</span> <span class="toc-text">1.5 括号逻辑判断简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93"><span class="toc-number">2.6.</span> <span class="toc-text">1.6 条件判断语法结构总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E7%94%A8%E4%BA%8Efor%E5%BE%AA%E7%8E%AF%E5%B5%8C%E5%A5%97"><span class="toc-number">2.7.</span> <span class="toc-text">1.7 条件判断用于for循环嵌套</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E7%94%A8%E4%BA%8Ewhile%E5%BE%AA%E7%8E%AF%E5%B5%8C%E5%A5%97"><span class="toc-number">2.8.</span> <span class="toc-text">1.8 条件判断用于while循环嵌套</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x02-Shell%E8%84%9A%E6%9C%AC%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">0x02 Shell脚本中的函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%87%BD%E6%95%B0%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 函数结构简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%87%BD%E6%95%B0%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81%E7%A0%81%E8%AE%BE%E7%BD%AE"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 函数退出状态码设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%87%BD%E6%95%B0%E6%9F%A5%E7%9C%8B%E4%B8%8E%E5%88%A0%E9%99%A4"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 函数查看与删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%87%BD%E6%95%B0%E7%9A%84%E8%BE%93%E5%87%BA%E5%80%BC%E8%AF%BB%E5%8F%96"><span class="toc-number">3.4.</span> <span class="toc-text">2.4 函数的输出值读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%87%BD%E6%95%B0%E7%9A%84%E4%BC%A0%E5%8F%82%E4%B8%8E%E9%80%92%E5%BD%92"><span class="toc-number">3.5.</span> <span class="toc-text">2.5 函数的传参与递归</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E5%87%BD%E6%95%B0%E5%BA%93%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">3.6.</span> <span class="toc-text">2.6 函数库的文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x03-GREP%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B"><span class="toc-number">4.</span> <span class="toc-text">0x03 GREP命令使用简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Grep%E5%91%BD%E4%BB%A4%E7%AE%80%E4%BB%8B"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 Grep命令简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-Grep%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9%E6%A6%82%E8%A7%88"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 Grep命令选项概览</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-Grep%E8%BE%93%E5%87%BA%E6%8E%A7%E5%88%B6%E9%80%89%E9%A1%B9"><span class="toc-number">4.2.1.</span> <span class="toc-text">3.2.1 Grep输出控制选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-Grep%E4%B8%8A%E4%B8%8B%E6%96%87%E6%8E%A7%E5%88%B6%E9%80%89%E9%A1%B9"><span class="toc-number">4.2.2.</span> <span class="toc-text">3.2.2 Grep上下文控制选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-Grep%E6%A8%A1%E5%BC%8F%E9%80%89%E6%8B%A9%E9%80%89%E9%A1%B9"><span class="toc-number">4.2.3.</span> <span class="toc-text">3.2.3 Grep模式选择选项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AE%80%E4%BB%8B"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 正则表达式简介</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x04-SED%E6%B5%81%E7%BC%96%E8%BE%91%E5%99%A8%E7%AE%80%E4%BB%8B"><span class="toc-number">5.</span> <span class="toc-text">0x04 SED流编辑器简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-Sed%E5%8A%9F%E8%83%BD%E4%B8%8E%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 Sed功能与运行原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-Sed%E5%8F%82%E6%95%B0%E9%80%89%E9%A1%B9"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 Sed参数选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Sed%E7%9A%84%E5%BA%94%E7%94%A8-%E8%A1%8C%E5%8F%B7%E5%AE%9A%E4%BD%8D"><span class="toc-number">5.3.</span> <span class="toc-text">4.3 Sed的应用 - 行号定位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-Sed%E7%9A%84%E5%BA%94%E7%94%A8-%E6%AD%A3%E5%88%99%E5%AE%9A%E4%BD%8D"><span class="toc-number">5.4.</span> <span class="toc-text">4.4 Sed的应用 - 正则定位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-Sed%E7%9A%84%E5%BA%94%E7%94%A8-%E6%96%87%E6%9C%AC%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">5.5.</span> <span class="toc-text">4.5 Sed的应用 - 文本的增删改查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-Sed%E7%9A%84%E5%BA%94%E7%94%A8-%E6%96%87%E6%9C%AC%E5%86%85%E5%AE%B9%E7%9A%84%E6%90%9C%E7%B4%A2%E6%9B%BF%E6%8D%A2"><span class="toc-number">5.6.</span> <span class="toc-text">4.6 Sed的应用 - 文本内容的搜索替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-Sed%E7%9A%84%E5%BA%94%E7%94%A8-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">5.7.</span> <span class="toc-text">4.7 Sed的应用 - 文件操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-Sed%E7%9A%84%E5%BA%94%E7%94%A8-%E5%BD%92%E7%BB%84"><span class="toc-number">5.8.</span> <span class="toc-text">4.8 Sed的应用 - 归组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-Sed%E7%9A%84%E5%BA%94%E7%94%A8-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%B2%E8%A1%8C"><span class="toc-number">5.9.</span> <span class="toc-text">4.9 Sed的应用 - 表达式串行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x05-AWK%E8%AF%AD%E5%8F%A5%E7%AE%80%E4%BB%8B"><span class="toc-number">6.</span> <span class="toc-text">0x05 AWK语句简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Awk%E7%AE%80%E4%BB%8B"><span class="toc-number">6.1.</span> <span class="toc-text">5.1 Awk简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-Awk%E7%9A%84%E6%A8%A1%E5%BC%8F%E5%92%8C%E5%8A%A8%E4%BD%9C"><span class="toc-number">6.2.</span> <span class="toc-text">5.2 Awk的模式和动作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-Awk%E7%9A%84%E6%A8%A1%E5%BC%8F%E6%80%BB%E8%A7%88"><span class="toc-number">6.3.</span> <span class="toc-text">5.3 Awk的模式总览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-Awk%E7%9A%84%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%BC%8F-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">6.4.</span> <span class="toc-text">5.4 Awk的常用模式 - 正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-Awk%E7%9A%84%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%BC%8F-%E5%B8%B8%E9%87%8F%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">6.5.</span> <span class="toc-text">5.5 Awk的常用模式 - 常量表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-awk%E5%AD%97%E6%AE%B5%E5%88%86%E9%9A%94%E7%AC%A6"><span class="toc-number">6.6.</span> <span class="toc-text">5.6 awk字段分隔符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-awk%E8%AE%B0%E5%BD%95%E5%88%86%E9%9A%94%E7%AC%A6"><span class="toc-number">6.7.</span> <span class="toc-text">5.7 awk记录分隔符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-Awk%E7%9A%84%E5%8A%A8%E4%BD%9C%E6%80%BB%E8%A7%88"><span class="toc-number">6.8.</span> <span class="toc-text">5.8 Awk的动作总览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-Awk%E7%9A%84%E5%B8%B8%E7%94%A8%E5%8A%A8%E4%BD%9C-%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0"><span class="toc-number">6.9.</span> <span class="toc-text">5.9 Awk的常用动作 - 内置函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-10-Awk%E7%9A%84%E5%8A%A8%E4%BD%9C-%E5%87%BD%E6%95%B0%E4%B8%BE%E4%BE%8B"><span class="toc-number">6.10.</span> <span class="toc-text">5.10 Awk的动作 - 函数举例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-11-Awk%E7%9A%84%E5%B8%B8%E7%94%A8%E5%8A%A8%E4%BD%9C-%E5%86%85%E7%BD%AE%E5%8F%98%E9%87%8F"><span class="toc-number">6.11.</span> <span class="toc-text">5.11 Awk的常用动作 - 内置变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-12-Awk%E7%9A%84%E5%B8%B8%E7%94%A8%E5%8A%A8%E4%BD%9C-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">6.12.</span> <span class="toc-text">5.12 Awk的常用动作 - 自定义变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-13-Awk%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA"><span class="toc-number">6.13.</span> <span class="toc-text">5.13 Awk的使用场景 - 格式化输出</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-13-1-printf%E7%B2%BE%E5%BA%A6"><span class="toc-number">6.13.1.</span> <span class="toc-text">5.13.1 printf精度</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-14-Awk%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">6.14.</span> <span class="toc-text">5.14 Awk的使用场景 - 控制语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-15-Awk%E7%9A%84%E8%84%9A%E6%9C%AC%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.15.</span> <span class="toc-text">5.15 Awk的脚本模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x06-%E6%9C%AC%E7%AB%A0%E6%80%BB%E7%BB%93"><span class="toc-number">7.</span> <span class="toc-text">0x06 本章总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IP/07%20openEuler%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E5%85%A5%E9%97%A8/" title="无题">无题</a><time datetime="2025-05-18T19:46:45.900Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/%E6%B3%A8%E9%87%8A/shebang/" title="无题">无题</a><time datetime="2025-05-18T19:46:45.880Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/10%20%E5%B8%B8%E7%94%A8%E5%B0%8F%E6%8C%87%E4%BB%A4/" title="无题">无题</a><time datetime="2025-05-18T19:46:45.685Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/" title="09 Samba文件共享服务器管理">09 Samba文件共享服务器管理</a><time datetime="2025-05-18T19:46:45.684Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/08%20%E4%BD%BF%E7%94%A8shell%E8%84%9A%E6%9C%AC/" title="08 使用shell脚本">08 使用shell脚本</a><time datetime="2025-05-18T19:46:45.683Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="XBCID" target="_blank">XBCID</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">37</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HCIA/" style="font-size: 0.88rem;">HCIA<sup>9</sup></a><a href="/tags/HCIP/" style="font-size: 0.88rem;">HCIP<sup>6</sup></a><a href="/tags/Huawei/" style="font-size: 0.88rem;">Huawei<sup>15</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>18</sup></a><a href="/tags/openEuler/" style="font-size: 0.88rem;">openEuler<sup>18</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("01/12/2021 14:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 XBCID 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>