<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>09 Samba文件共享服务器管理 | XBCID's BLOG</title><meta name="keywords" content="Linux,openEuler,Huawei,HCIA"><meta name="author" content="XBCID"><meta name="copyright" content="XBCID"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="09 Samba文件共享服务器管理"><meta name="application-name" content="09 Samba文件共享服务器管理"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="09 Samba文件共享服务器管理"><meta property="og:url" content="http://example.com/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/index.html"><meta property="og:site_name" content="XBCID's BLOG"><meta property="og:description" content="完成openEuler系统基础命令操作后，可以基于openEuler及软件搭建各类服务，应用到各个IT系统中，基于openEuler及Samba可以完成文件共享服务器的搭建。 学完本课程后，你将能够:  基于openEuler系统文件共享服务器配置 设置文件共享服务器用户与权限 文件服务器基本运维与"><meta property="og:locale" content="zh"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="XBCID"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="完成openEuler系统基础命令操作后，可以基于openEuler及软件搭建各类服务，应用到各个IT系统中，基于openEuler及Samba可以完成文件共享服务器的搭建。 学完本课程后，你将能够:  基于openEuler系统文件共享服务器配置 设置文件共享服务器用户与权限 文件服务器基本运维与"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: XBCID","link":"链接: ","source":"来源: XBCID's BLOG","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'XBCID's BLOG',
  title: '09 Samba文件共享服务器管理',
  postAI: '',
  pageFillDescription: '0x01 Samba文件共享服务器搭建, 1.1 Samba文件共享服务介绍, 1.2 Samba文件共享服务套件, 1.3 Samba文件共享服务配置文件, 1.4 Samba文件共享服务常用命令, 1.5 从指定源安装Samba软件, 1.6 管理Samba服务、端口、开机启动项, 0x02 Samba文件共享服务器用户和权限设置, 2.1 根据要求添加用户, 2.2 准备共享文件与设置文件访问权限, 2.3 配置Samba共享配置, 2.4 测试Samba服务器可成功访问, 0x03 Samba服务器运维与故障排除, 3.1 使用定时任务管理文件, 3.2 系统及服务日志, 3.3 定位文件共享故障与解决方案, 3.4 思考题完成系统基础命令操作后可以基于及软件搭建各类服务应用到各个系统中基于及可以完成文件共享服务器的搭建学完本课程后你将能够基于系统文件共享服务器配置设置文件共享服务器用户与权限文件服务器基本运维与排障文件共享服务器搭建文件共享服务介绍是一个能让系统应用网络通讯协议的软件服务器消息块最大的功能是可以用于与系统之间的文件共享和打印共享既可以用于与之间的文件共享也可以用于与之间的文件共享基于客户机服务器的协议因而一台服务器既可以充当文件共享服务器客户端在下使用的是协议要使用下共享出来的文件要确认系统安装了协议是的核心启动服务主要负责建立服务器与客户机之间的对话验证用户身份并提供对文件和打印系统的访问只有服务启动才能实现文件的共享监听端口而服务是负责解析用的类似与实现的功能可以把系统共享的工作组名称与其对应起来如果服务没有启动就只能通过来访问共享文件监听和端口文件共享服务套件安装这个服务器总共需要至少三个套件包括和这个套件主要包含了的主要配置及的文件档以及其它与相关的设定文件及开机预设选项配置等这个套件则主要提供了的主要配置语法检验的测试程序等这个套件则提供了当做为端时所需要的工具指令例如挂载配置格式的执行档等文件共享服务配置文件配置文件目录存放于几个主要的配置文件有和这个是最主要的配置文件在较为简单的设定当中这也是唯一的一个配置文件该配置文件主要的设定分为两部分分别为这个设定主机功能的项目每个分享出去的目录的属性设定该配置的主要目的在对应与该主机名称的由于目前的功能越来越强大所以通常只要一启动时它就能获取里面的相关计算机的对应的的信息因此该配置通常可以不用设定是存放使用者密码对应表文件当设定的服务器需要使用者输入账号与密码后才能登入的状态时使用者的密码存放于该文件配置文件详解设置服务器的整体环境指定工作组名称指定主机注释说明指定默认主机名允许访问服务器地址范围默认允许所有的访问设置安全等级模式需用户验证模式无需验证指定允许访问用户指定不允许访问用户指定写入用户设置只读用户是否可以匿名访问文件共享服务常用命令服务器常用命令包括如下设置用户及其密码常用参数表示增加用户与配置密码查看计算机分享出来的目录与装置常用参数后面接需要查看的主机后面接登录的用户名将远程主机分享的目录挂载到主机上与功能类似用于测试的设置是否正确测试文件为测试无误表示服务能正常加载该配置从指定源安装软件使用软件管理包工具配置软件源获取需要安装的工具套件包括及其依赖包使用添加软件源使用启用添加的软件源使用下载并安装软件管理服务端口开机启动项服务安装后设置服务为开机启动并启动服务然后查看其监听端口状态设置为开机启动启动服务查看服务运行状态查看端口监听状态文件共享服务器用户和权限设置根据要求添加用户当服务器需要基于用户权限进行访问资源控制时需要在系统中创建对应的用户并设置为可通过服务登录无法通过的登录系统创建用户不创建用户目录和无登录权限设置用户通过服务器登录并设置密码准备共享文件与设置文件访问权限为服务器提供共享目录需要在系统中创建对应的共享文件并设置共享目录的权限创建共享目录和更改共享目录和的权限为所有人有所有权限更改共享目录的的属主为配置共享配置编辑配置文件客户端可用通过匿名访问目录访问目录需要通过用户认证才能访问两个文件都用读写权限编辑配置使用户可以匿名访问添加字段新建访问目录设置其权限新建访问目录并设置其权限测试服务器可成功访问在系统通过文件共享的方式访问服务器连接共享服务器后可以成功创建文件通过访问目录无需通过登录认证并且可以创建和删除文件夹或文件通过访问目录需要提供用户认证信息后才能打开文件并且可以成功在目录中创建文件夹或文件服务器运维与故障排除使用定时任务管理文件文件共享服务器的共享数据可以用过设置定时任务每天备份数据使用脚本与定时周期任务设置对目录的数据归档备份到目录创建数据备份脚本创建临时备份目录将共享文件夹的数据复制到备份目录打包共享目录的数据到删除临时备份目录删除天以上的备份数据为脚本设置可以执行权限设置周期执行任务使用命名编辑周期执行任务执行计划为每天点执行备份脚本一次备份数据到目录并保存文件名为当天时间完成后查看备份任务系统及服务日志当需要通过日志查看服务器的运行信息或报错信息时系统日志文件保存在目录下使用命令查找到服务日志文件后在通过日志文本查看命令查看最后条日志记录查看目录下目录的日志文件名查看最后行的日志记录查看系统最后行日志记录定位文件共享故障与解决方案在使用过程中常遇到无法使用文件共享服务的情况常见的错误包括文件共享服务器无法访问网络连接失败查看防火墙是否开启关闭防火墙服务未启动重启服务文件共享服务器无法启动配置错误检查配置文件错误字段根据提供的提示修改对应的字段文件无权限访问或创建文件共享目录权限配置错误文件属主错误更改文件属主为对应的用户文件权限错误更改文件权限思考题配置文件共享服务器需要安装哪些软件最主要配置文件是什么如果需要基于用户与资源访问控制需要完成哪些操作参考答案需要安装和最重要的配置文件为需要创建用户并设置为登录创建共享文件目录并设置对应的访问权限在配置文件中设置共享文件目录',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-05-19 03:45:53',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">XBCID's BLOG</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HCIA/" style="font-size: 1.05rem;">HCIA<sup>9</sup></a><a href="/tags/HCIP/" style="font-size: 1.05rem;">HCIP<sup>6</sup></a><a href="/tags/Huawei/" style="font-size: 1.05rem;">Huawei<sup>15</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>18</sup></a><a href="/tags/openEuler/" style="font-size: 1.05rem;">openEuler<sup>18</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">May 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">23</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">March 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">February 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Linux</span></a><a class="article-meta__tags" href="/tags/openEuler/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>openEuler</span></a><a class="article-meta__tags" href="/tags/Huawei/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Huawei</span></a><a class="article-meta__tags" href="/tags/HCIA/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>HCIA</span></a></span></div></div><h1 class="post-title" itemprop="name headline">09 Samba文件共享服务器管理</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-05-18T19:46:45.684Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-05-18T19:45:53.133Z" title="更新于 2025-05-19 03:45:53">2025-05-19</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为重庆"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>重庆</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"><header><a href="/tags/Linux/" tabindex="-1" itemprop="url">Linux</a><a href="/tags/openEuler/" tabindex="-1" itemprop="url">openEuler</a><a href="/tags/Huawei/" tabindex="-1" itemprop="url">Huawei</a><a href="/tags/HCIA/" tabindex="-1" itemprop="url">HCIA</a><h1 id="CrawlerTitle" itemprop="name headline">09 Samba文件共享服务器管理</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">XBCID</span><time itemprop="dateCreated datePublished" datetime="2025-05-18T19:46:45.684Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time><time itemprop="dateCreated datePublished" datetime="2025-05-18T19:45:53.133Z" title="更新于 2025-05-19 03:45:53">2025-05-19</time></header><p>完成openEuler系统基础命令操作后，可以基于openEuler及软件搭建各类服务，应用到各个IT系统中，基于openEuler及Samba可以完成文件共享服务器的搭建。</p>
<p>学完本课程后，你将能够:</p>
<ul>
<li>基于openEuler系统文件共享服务器配置</li>
<li>设置文件共享服务器用户与权限</li>
<li>文件服务器基本运维与排障</li>
</ul>
<hr>
<h2 id="0x01-Samba文件共享服务器搭建"><a href="#0x01-Samba文件共享服务器搭建" class="headerlink" title="0x01 Samba文件共享服务器搭建"></a>0x01 Samba文件共享服务器搭建</h2><h3 id="1-1-Samba文件共享服务介绍"><a href="#1-1-Samba文件共享服务介绍" class="headerlink" title="1.1 Samba文件共享服务介绍"></a>1.1 Samba文件共享服务介绍</h3><ul>
<li>Samba是一个能让Linux系统应用Microsoft网络通讯协议的软件，SMB（Server Message Block）服务器消息块</li>
<li>Samba最大的功能是可以用于Linux与windows系统之间的文件共享和打印共享，既可以用于Windows与Linux之间的文件共享,也可以用于linux与linux之间的文件共享。</li>
<li>基于客户机&#x2F;服务器(C&#x2F;S)的协议，因而一台Samba服务器既可以充当<ul>
<li>文件共享服务器</li>
<li>Samba客户端</li>
</ul>
</li>
<li>Samba在 windows 下使 用的 是<code>NetBIOS 协议</code> ，要 使用 linux 下 共 享出 来的 文件 ，要 确 认windows系统安装了<code>NetBIOS协议</code>。</li>
</ul>
<p>SMB是Samba 的核心启动服务，主要负责建立 Linux Samba服务器与Samba客户机之间的对话， 验证用户身份并提供对文件和打印系统的访问，只有SMB服务启动，才能实现文件的共享，监听139 TCP端口；而NMB服务是负责解析用的，类似与DNS实现的功能，NMB可以把Linux系统共享的工作组名称与其IP对应起来，如果NMB服务没有启动，就只能通过IP来访问共享文件，监听137和138 UDP端口。</p>
<h3 id="1-2-Samba文件共享服务套件"><a href="#1-2-Samba文件共享服务套件" class="headerlink" title="1.2 Samba文件共享服务套件"></a>1.2 Samba文件共享服务套件</h3><ul>
<li>安装SAMBA 这个服务器总共需要至少三个套件，包括samba、samba-common和samba-client。<ul>
<li>samba：这个套件主要包含了 SAMBA 的主要 daemon配置 ( smbd 及 nmbd )、 SAMBA 的文件档 ( document )、以及其它与 SAMBA 相关的logrotate 设定文件及开机预设选项配置等。</li>
<li>samba-common：这个套件则主要提供了 SAMBA 的主要配置(smb.conf) 、 smb.conf 语法检验的测试程序 ( testparm )等；</li>
<li>samba-client：这个套件则提供了当 Linux 做为SAMBA Client 端时，所需要的工具指令，例如挂载 SAMBA 配置格式的执行档 smbmount等。</li>
</ul>
</li>
</ul>
<h3 id="1-3-Samba文件共享服务配置文件"><a href="#1-3-Samba文件共享服务配置文件" class="headerlink" title="1.3 Samba文件共享服务配置文件"></a>1.3 Samba文件共享服务配置文件</h3><ul>
<li><p>Samba配置文件目录存放于<code>/etc/samba</code>，几个主要的配置文件有<code>smb.conf</code>、<code>lmhosts</code>和<code>smbpasswd</code></p>
</li>
<li><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/assets/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/2025021622-4150280.png" alt="/etc/samba"></p>
</li>
<li><p><code>smb.conf</code>：这个是SAMBA<strong>最主要的配置文</strong>件。在较为简单的设定当中，这也是<strong>唯一的一个配置文件</strong>。该配置文件主要的设定分为两部分，分别为：</p>
<ul>
<li><code>[global]</code>这个设定主机功能的项目</li>
<li><code>[sharedir]</code>每个分享出去的目录的属性设定</li>
</ul>
</li>
<li><p><code>lmhosts</code>：该配置的主要目的在对应<code>NetBIOS name</code>与该主机名称的IP。由于目前SAMBA的功能越来越强大，所以通常只要一启动SAMBA时，它就能获取LAN里面的相关计算机的NetBIOS name对应的IP的信息，因此该配置<strong>通常可以不用设定</strong></p>
</li>
<li><p><code>smbpasswd</code>是SAMBA存放使用者密码对应表文件。当设定的SAMBA服务器需要使用者输入账号与密码后才能登入的状态时，使用者的密码存放于该文件</p>
</li>
<li><p><code>smb.conf</code>配置文件详解</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">global</span>] <span class="comment">#设置Samba服务器的整体环境</span></span><br><span class="line"><span class="string">workgroup</span> <span class="string">=</span> <span class="string">MYGROUP</span> <span class="comment">#指定工作组名称</span></span><br><span class="line"><span class="string">server</span> <span class="string">string</span> <span class="string">=</span> <span class="string">Samba</span> <span class="string">Server</span> <span class="string">Version</span> <span class="comment">#指定主机注释说明</span></span><br><span class="line"><span class="string">netbios</span> <span class="string">name</span> <span class="string">=</span> <span class="string">MYSERVER</span> <span class="comment">#指定Samba默认主机名</span></span><br><span class="line"><span class="string">hosts</span> <span class="string">allow</span> <span class="string">=</span> <span class="number">127</span><span class="string">.</span> <span class="number">192.168</span><span class="number">.12</span><span class="string">.</span> <span class="number">192.168</span><span class="number">.13</span><span class="string">.</span> <span class="comment">#允许访问samba服务器IP地址范围，默认允许所有的IP访问</span></span><br><span class="line"><span class="string">security</span> <span class="string">=</span> <span class="string">user</span> <span class="comment">#设置安全等级,user模式需用户验证，share模式无需验证。</span></span><br><span class="line">[<span class="string">homes</span>]</span><br><span class="line"><span class="string">valid</span> <span class="string">users</span> <span class="string">=</span> <span class="comment">#指定允许访问用户</span></span><br><span class="line"><span class="string">invalid</span> <span class="string">users</span> <span class="string">=</span> <span class="comment">#指定不允许访问用户</span></span><br><span class="line"><span class="string">write</span> <span class="string">list</span> <span class="string">=</span> <span class="comment">#指定写入用户</span></span><br><span class="line"><span class="string">read</span> <span class="string">list</span> <span class="string">=</span> <span class="comment">#设置只读用户</span></span><br><span class="line"><span class="string">public</span> <span class="string">=</span> <span class="literal">yes</span> <span class="comment">#是否可以匿名访问</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/assets/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/2025021622-5259446.png" alt="smb.conf文件内容"></p>
<h3 id="1-4-Samba文件共享服务常用命令"><a href="#1-4-Samba文件共享服务常用命令" class="headerlink" title="1.4 Samba文件共享服务常用命令"></a>1.4 Samba文件共享服务常用命令</h3><ul>
<li>Samba服务器常用命令包括如下：<ul>
<li><code>smbpasswd</code>: 设置samba用户及其密码。常用参数“-a”，表示增加smb用户与配置密码。</li>
<li><code>smbclient</code>：查看计算机分享出来的目录与装置。常用参数“-L”后面接需要查看的主机IP，“-U”后面接登录的用户名。</li>
<li><code>smbmount</code>： 将远程主机分享的目录挂载到Linux 主机上，与mount功能类似。</li>
<li><code>testparm</code>：用于测试Samba的设置是否正确，测试文件为smb.conf，测试无误表示Samba服务能正常加载该配置。</li>
</ul>
</li>
</ul>
<h3 id="1-5-从指定源安装Samba软件"><a href="#1-5-从指定源安装Samba软件" class="headerlink" title="1.5 从指定源安装Samba软件"></a>1.5 从指定源安装Samba软件</h3><pre><code>使用DNF软件管理包工具配置软件源。获取需要安装的Samba工具套件，包括Samba，Samba-comon，Samba-client及其依赖包。
使用DNF添加软件源：
    `dnf config-manager --add-repo repository_url`
- 使用DNF启用添加的软件源
    `dnf config-manager --set-enable repository`
- 使用DNF下载并安装软件：
    `dnf install samba samba-common samba-client`
</code></pre>
<h3 id="1-6-管理Samba服务、端口、开机启动项"><a href="#1-6-管理Samba服务、端口、开机启动项" class="headerlink" title="1.6 管理Samba服务、端口、开机启动项"></a>1.6 管理Samba服务、端口、开机启动项</h3><ul>
<li>Samba服务安装后，设置Samba服务为开机启动，并启动Samba服务，然后查看其监听端口状态。<ul>
<li>设置Samba为开机启动：<ul>
<li><code>systemctl enable smb</code></li>
</ul>
</li>
<li>启动Samba服务<ul>
<li><code>systemctl start smb</code></li>
</ul>
</li>
<li>查看Samba服务运行状态<ul>
<li><code>systemctl status smb</code></li>
</ul>
</li>
<li>查看端口监听状态<ul>
<li><code>netstat -lantp |grep 139</code></li>
<li><code>netstat -lantp |grep 445</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="0x02-Samba文件共享服务器用户和权限设置"><a href="#0x02-Samba文件共享服务器用户和权限设置" class="headerlink" title="0x02 Samba文件共享服务器用户和权限设置"></a>0x02 Samba文件共享服务器用户和权限设置</h2><h3 id="2-1-根据要求添加用户"><a href="#2-1-根据要求添加用户" class="headerlink" title="2.1 根据要求添加用户"></a>2.1 根据要求添加用户</h3><ul>
<li>当Samba服务器需要基于用户权限进行访问资源控制时，需要在openEuler系统中创建对应的用户，并设置为可通过Samba服务登录，无法通过openEuler的Shell登录系统。<ul>
<li>创建openEuler用户smb，不创建用户home目录和无shell登录权限：<ul>
<li><code>useradd smb -M -s /sbin/nologin</code></li>
</ul>
</li>
<li>设置smb用户通过Samba服务器登录，并设置密码：<ul>
<li><code>smbpasswd -a smb</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-2-准备共享文件与设置文件访问权限"><a href="#2-2-准备共享文件与设置文件访问权限" class="headerlink" title="2.2 准备共享文件与设置文件访问权限"></a>2.2 准备共享文件与设置文件访问权限</h3><ul>
<li>为Samba服务器提供共享目录，需要在openEuler系统中创建对应的共享文件，并设置共享目录的权限。<ul>
<li>创建共享目录share和smb：<ul>
<li><code>mkdir /var/share /var/smb</code></li>
</ul>
</li>
<li>更改共享目录share和smb的权限为所有人有所有权限：<ul>
<li><code>chmod 777 /var/share /var/smb</code></li>
</ul>
</li>
<li>更改共享目录的smb的属主为smb：<ul>
<li><code>chown smb:smb /var/smb</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-3-配置Samba共享配置"><a href="#2-3-配置Samba共享配置" class="headerlink" title="2.3 配置Samba共享配置"></a>2.3 配置Samba共享配置</h3><ul>
<li>编辑Samba配置文件<code>smb.conf</code>，客户端可用通过匿名访问share目录，访问<code>smb</code>目录需要通过用户认证才能访问，两个文件都用读写权限。<ul>
<li>编辑<code>[global]</code>配置使用户可以匿名访问，添加字段：<code>map to gust = Bad user</code></li>
<li>新建<code>[share]</code>访问目录，设置其权限：<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">share</span>]</span><br><span class="line"><span class="string">comment</span> <span class="string">=</span> <span class="string">share</span></span><br><span class="line"><span class="string">path</span> <span class="string">=</span> <span class="string">/var/share</span></span><br><span class="line"><span class="string">guest</span> <span class="string">ok</span> <span class="string">=</span> <span class="literal">yes</span></span><br><span class="line"><span class="string">browseable</span> <span class="string">=</span> <span class="literal">yes</span></span><br><span class="line"><span class="string">writeable</span> <span class="string">=</span> <span class="literal">yes</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>新建<code>[smb]</code>访问目录，并设置其权限：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">smb</span>]</span><br><span class="line"><span class="string">comment</span> <span class="string">=</span> <span class="string">smb</span></span><br><span class="line"><span class="string">path</span> <span class="string">=</span> <span class="string">/var/smb</span></span><br><span class="line"><span class="string">write</span> <span class="string">list</span> <span class="string">=</span> <span class="string">smb</span></span><br><span class="line"><span class="string">broweable</span> <span class="string">=</span> <span class="literal">yes</span></span><br><span class="line"><span class="string">writable</span> <span class="string">=</span> <span class="literal">yes</span></span><br><span class="line"><span class="string">read</span> <span class="string">list</span> <span class="string">=</span> <span class="string">smb</span></span><br><span class="line"><span class="string">valid</span> <span class="string">users</span> <span class="string">=</span> <span class="string">smb</span></span><br><span class="line"><span class="string">create</span> <span class="string">mask</span> <span class="string">=</span> <span class="number">0777</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-测试Samba服务器可成功访问"><a href="#2-4-测试Samba服务器可成功访问" class="headerlink" title="2.4 测试Samba服务器可成功访问"></a>2.4 测试Samba服务器可成功访问</h3><ul>
<li>在window系统通过文件共享的方式访问Samba服务器，连接共享服务器后可以成功创建文件。<ul>
<li>通过<code>\\Samba IP\share</code>访问目录，无需通过登录认证，并且可以创建和删除文件夹或文件</li>
<li>通过<code>\\Samba IP\smb</code>访问目录，需要提供<code>smb</code>用户认证信息后，才能打开文件，并且可以成功在目录smb中创建文件夹或文件。</li>
</ul>
</li>
</ul>
<h2 id="0x03-Samba服务器运维与故障排除"><a href="#0x03-Samba服务器运维与故障排除" class="headerlink" title="0x03 Samba服务器运维与故障排除"></a>0x03 Samba服务器运维与故障排除</h2><h3 id="3-1-使用定时任务管理文件"><a href="#3-1-使用定时任务管理文件" class="headerlink" title="3.1 使用定时任务管理文件"></a>3.1 使用定时任务管理文件</h3><ul>
<li><p>Samba文件共享服务器的共享数据，可以用过设置定时任务每天备份数据。使用Shell脚本与定时周期任务<code>crontab</code>设置对<code>share</code>目录的数据归档备份到smb目录。</p>
<ul>
<li><p>创建数据备份脚本<code>/root/backup.sh</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">！/bin/sh</span></span><br><span class="line">mkdir /var/backup #创建临时备份目录</span><br><span class="line">cp -r /var/share/ /var/backup/ #将共享文件夹的数据复制到备份目录</span><br><span class="line">tar -zcPvf /var/smb/backup$(date +%Y%m%d).tar.gz /var/backup #打包共享目录的数据到/var/backup</span><br><span class="line">rm -rf /var/backup/ #删除临时备份目录</span><br><span class="line">find /var/smb/ -mtime +30 -name &quot;*.tar.gz&quot; -exec rm -rf &#123;&#125; \; #删除30天以上的备份数据</span><br></pre></td></tr></table></figure>
</li>
<li><p>为脚本设置可以执行权限：</p>
<ul>
<li><code>chmod +x backup.sh</code></li>
</ul>
</li>
</ul>
</li>
<li><p>设置周期执行任务，使用crontab命名编辑周期执行任务，执行计划为每天22点0执行备份脚本backup.sh一次，备份数据到smb目录，并保存文件名为当天时间。</p>
</li>
<li><p>完成后，查看备份任务：<code>crontab –l</code></p>
</li>
</ul>
<h3 id="3-2-系统及服务日志"><a href="#3-2-系统及服务日志" class="headerlink" title="3.2 系统及服务日志"></a>3.2 系统及服务日志</h3><ul>
<li>当需要通过日志查看Samba服务器的运行信息或报错信息时，openEuler系统日志文件保存在&#x2F;var&#x2F;log目录下，使用ls命令查找到Samba服务日志文件后，在通过日志文本查看命令查看最后20条日志记录。<ul>
<li>查看&#x2F;var&#x2F;log目录下Samba目录的日志文件名：<code>ls –l /var/log/samba</code></li>
<li>查看最后20行的日志记录：<code>tail /var/log/samba/log.smbd –n 20</code></li>
<li>查看openEuler系统最后20行日志记录：<code> tail /var/log/messages -n 20</code></li>
</ul>
</li>
</ul>
<h3 id="3-3-定位文件共享故障与解决方案"><a href="#3-3-定位文件共享故障与解决方案" class="headerlink" title="3.3 定位文件共享故障与解决方案"></a>3.3 定位文件共享故障与解决方案</h3><ul>
<li>在Samba使用过程中，常遇到无法使用文件共享服务的情况，常见的错误包括：<ul>
<li>文件共享服务器无法访问，网络连接失败<ul>
<li>查看防火墙是否开启，关闭防火墙：<code>systemctl stop firewalld</code></li>
<li>Samba服务未启动，重启服务: <code>systecmctl restart smb</code></li>
</ul>
</li>
<li>文件共享服务器无法启动，配置错误：<ul>
<li>检查配置文件错误字段，根据提供的提示修改对应的字段: <code>cd /etc/samba;testparm</code></li>
</ul>
</li>
<li>文件无权限访问或创建文件，共享目录权限配置错误：<ul>
<li>文件属主错误，更改文件属主为对应的用户：<code>chown smb:smb /var/smb</code></li>
<li>文件权限错误，更改文件权限：<code>chmod 777 smb:smb/var/smb</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-4-思考题"><a href="#3-4-思考题" class="headerlink" title="3.4 思考题"></a>3.4 思考题</h3><p>配置Samba文件共享服务器，需要安装哪些软件？最主要配置文件是什么？如果需要基于用户与资源访问控制需要完成哪些操作?</p>
<p>参考答案：</p>
<ul>
<li>需要安装samba、samba-common和samba-client</li>
<li>最重要的配置文件为smb.conf</li>
<li>需要创建用户并设置为Samba登录；创建共享文件目录并设置对应的访问权限；在配置文件中设置共享文件目录</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">XBCID</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/')">09 Samba文件共享服务器管理</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=09 Samba文件共享服务器管理&amp;url=http://example.com/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">XBCID's BLOG</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Linux<span class="tagsPageCount">18</span></a><a class="post-meta__box__tags" href="/tags/openEuler/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>openEuler<span class="tagsPageCount">18</span></a><a class="post-meta__box__tags" href="/tags/Huawei/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Huawei<span class="tagsPageCount">15</span></a><a class="post-meta__box__tags" href="/tags/HCIA/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>HCIA<span class="tagsPageCount">9</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/08%20%E4%BD%BF%E7%94%A8shell%E8%84%9A%E6%9C%AC/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">08 使用shell脚本</div></div></a></div><div class="next-post pull-right"><a href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/10%20%E5%B8%B8%E7%94%A8%E5%B0%8F%E6%8C%87%E4%BB%A4/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/01%20openEuler%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%85%A5%E9%97%A8/" title="01 openEuler操作系统入门"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">01 openEuler操作系统入门</div></div></a></div><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/02%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C%E5%9F%BA%E7%A1%80/" title="02 命令行操作基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">02 命令行操作基础</div></div></a></div><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/03%20%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E4%BB%A5%E5%8F%8A%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86/" title="03 文本编辑器以及文本处理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">03 文本编辑器以及文本处理</div></div></a></div><div><a href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/06%20%E7%AE%A1%E7%90%86%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%8F%8A%E5%AD%98%E5%82%A8/" title="06 管理文件系统及存储"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-05-19</div><div class="title">06 管理文件系统及存储</div></div></a></div><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/04%20%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" title="04 用户和权限管理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">04 用户和权限管理</div></div></a></div><div><a href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/05%20%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%B9%B6%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1/" title="05 安装软件并管理服务"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-05-19</div><div class="title">05 安装软件并管理服务</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0x01-Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA"><span class="toc-number">1.</span> <span class="toc-text">0x01 Samba文件共享服务器搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 Samba文件共享服务介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%A5%97%E4%BB%B6"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 Samba文件共享服务套件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 Samba文件共享服务配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 Samba文件共享服务常用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-%E4%BB%8E%E6%8C%87%E5%AE%9A%E6%BA%90%E5%AE%89%E8%A3%85Samba%E8%BD%AF%E4%BB%B6"><span class="toc-number">1.5.</span> <span class="toc-text">1.5 从指定源安装Samba软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-%E7%AE%A1%E7%90%86Samba%E6%9C%8D%E5%8A%A1%E3%80%81%E7%AB%AF%E5%8F%A3%E3%80%81%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E9%A1%B9"><span class="toc-number">1.6.</span> <span class="toc-text">1.6 管理Samba服务、端口、开机启动项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x02-Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">0x02 Samba文件共享服务器用户和权限设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E6%A0%B9%E6%8D%AE%E8%A6%81%E6%B1%82%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 根据要求添加用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%87%86%E5%A4%87%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E4%B8%8E%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 准备共享文件与设置文件访问权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E9%85%8D%E7%BD%AESamba%E5%85%B1%E4%BA%AB%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 配置Samba共享配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%B5%8B%E8%AF%95Samba%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%AF%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 测试Samba服务器可成功访问</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x03-Samba%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4%E4%B8%8E%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4"><span class="toc-number">3.</span> <span class="toc-text">0x03 Samba服务器运维与故障排除</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E4%BD%BF%E7%94%A8%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 使用定时任务管理文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E7%B3%BB%E7%BB%9F%E5%8F%8A%E6%9C%8D%E5%8A%A1%E6%97%A5%E5%BF%97"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 系统及服务日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%AE%9A%E4%BD%8D%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%95%85%E9%9A%9C%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 定位文件共享故障与解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E6%80%9D%E8%80%83%E9%A2%98"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 思考题</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IP/07%20openEuler%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E5%85%A5%E9%97%A8/" title="无题">无题</a><time datetime="2025-05-18T19:46:45.900Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/%E6%B3%A8%E9%87%8A/shebang/" title="无题">无题</a><time datetime="2025-05-18T19:46:45.880Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/10%20%E5%B8%B8%E7%94%A8%E5%B0%8F%E6%8C%87%E4%BB%A4/" title="无题">无题</a><time datetime="2025-05-18T19:46:45.685Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/" title="09 Samba文件共享服务器管理">09 Samba文件共享服务器管理</a><time datetime="2025-05-18T19:46:45.684Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/08%20%E4%BD%BF%E7%94%A8shell%E8%84%9A%E6%9C%AC/" title="08 使用shell脚本">08 使用shell脚本</a><time datetime="2025-05-18T19:46:45.683Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="XBCID" target="_blank">XBCID</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">37</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HCIA/" style="font-size: 0.88rem;">HCIA<sup>9</sup></a><a href="/tags/HCIP/" style="font-size: 0.88rem;">HCIP<sup>6</sup></a><a href="/tags/Huawei/" style="font-size: 0.88rem;">Huawei<sup>15</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>18</sup></a><a href="/tags/openEuler/" style="font-size: 0.88rem;">openEuler<sup>18</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("01/12/2021 14:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 XBCID 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>