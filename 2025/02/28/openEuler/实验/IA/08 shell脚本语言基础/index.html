<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>08 shell脚本语言基础 | XBCID's BLOG</title><meta name="keywords" content="Linux,openEuler"><meta name="author" content="XBCID"><meta name="copyright" content="XBCID"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="08 shell脚本语言基础"><meta name="application-name" content="08 shell脚本语言基础"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="08 shell脚本语言基础"><meta property="og:url" content="http://example.com/2025/02/28/openEuler/%E5%AE%9E%E9%AA%8C/IA/08%20shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/index.html"><meta property="og:site_name" content="XBCID's BLOG"><meta property="og:description" content="8.1 实验介绍8.1.1 实验介绍在对系统进行运维时，shell 脚本给了我们很大帮助。通过 shell 脚本，可以大大减少工作量。本实验主要介绍 shell 脚本的概念及使用。 8.1.2 实验目标 掌握全局变量及局部变量； 掌握位置化参数使用； 掌握 shell 中的特殊字符； 掌握常用的 s"><meta property="og:locale" content="zh"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="XBCID"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="8.1 实验介绍8.1.1 实验介绍在对系统进行运维时，shell 脚本给了我们很大帮助。通过 shell 脚本，可以大大减少工作量。本实验主要介绍 shell 脚本的概念及使用。 8.1.2 实验目标 掌握全局变量及局部变量； 掌握位置化参数使用； 掌握 shell 中的特殊字符； 掌握常用的 s"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/02/28/openEuler/%E5%AE%9E%E9%AA%8C/IA/08%20shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: XBCID","link":"链接: ","source":"来源: XBCID's BLOG","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'XBCID's BLOG',
  title: '08 shell脚本语言基础',
  postAI: '',
  pageFillDescription: '8.1 实验介绍, 8.1.1 实验介绍, 8.1.2 实验目标, 8.2 hell 变量, 8.2.1 用户变量的定义, 8.3 shell 中的特殊字符, 8.4 条件判断与循环结构, 8.4.1 if 语句, 8.4.1.1 语法示例, 8.4.1.3【附录】if 常用判断, 文件x2F目录判断, 文件比较, 字符串判断, 数值判断, 逻辑判断, 8.4.1.4 作业, 8.4.2 测试语句, 8.4.3 while 语句, 8.4.4 for 语句, 8.4.5 case 语句实验介绍实验介绍在对系统进行运维时脚本给了我们很大帮助通过脚本可以大大减少工作量本实验主要介绍脚本的概念及使用实验目标掌握全局变量及局部变量掌握位置化参数使用掌握中的特殊字符掌握常用的语句变量用户变量的定义步骤执行如下命令设置自定义局部变量无回显作为交互式输入手段可以利用命令由标准输入即键盘上读取数据然后赋给指定的变量其一般格式是变量变量此处输入此处输入步骤执行如下步骤配置用户变量是用户独享的配置文件在文件最后新增一行修改完成后保存退出未更新变量文件时值未发生变化更新变量文件后值发生变化打开一个新的变量未定义退出新打开的以登录的方式切换用户此时会自动读取文件变量值生效退出当前的登录步骤执行如下步骤配置系统环境变量是系统的配置文件所有用户共享在文件最后新增一行输入如下信息并保存退出变量未更新更新变量变量值发生了变化打开一个新的变量未定义退出新打开的以登录的方式切换用户此时会自动读取文件变量值生效退出当前用户位置参数步骤在目录下新建三个文件内容如下步骤执行脚本中的特殊字符步骤新建脚本写入如下内容步骤执行脚本中其他特殊变量列表变量含义当前脚本的文件名传递给脚本或函数的参数是一个数字表示第几个参数例如第一个参数是第二个参数是使用不能获取第十个参数获取第十个参数需要使用当大于或等于时需要使用来获取参数传递给脚本或函数的参数个数传递给脚本或函数的所有参数传递给脚本或函数的所有参数被双引号包含时与稍有不同下面将会讲到上个命令的退出状态或函数的返回值当前进程对于脚本就是这些脚本所在的进程条件判断与循环结构语句语法示例步骤新建脚本写入如下内容附录常用判断文件目录判断如果文件存在返回为真这个选项在许多系统中已经过时但在一些系统中仍然有效如果存在并且是一个块设备文件例如硬盘分区或虚拟磁盘返回为真如果存在并且是一个字符设备文件例如终端设备或串行端口设备返回为真如果存在并且是一个目录返回为真如果存在无论类型是什么都返回为真如果存在并且是一个普通文件不是目录符号链接等返回为真如果存在并且设置了位返回为真如果存在并且是一个符号链接文件返回为真注意该选项在某些老旧系统上可能无效可以使用替代如果存在并且设置了粘着位返回为真粘着位通常用于确保文件只能由文件的所有者删除如果存在并且是命名管道返回为真如果存在并且是可读的返回为真如果存在并且大小不为零即文件非空返回为真如果存在并且设置了位返回为真如果存在并且是可写的返回为真如果存在并且是可执行的返回为真如果存在并且是当前用户的所有文件返回为真如果存在并且属于当前用户的默认组返回为真如果存在并且是一个符号链接文件返回为真如果存在并且自上次读取以来被修改过返回为真如果存在并且是一个套接字文件返回为真文件比较如果比更新即的修改时间较新或者存在而不存在返回为真如果比旧即的修改时间较早或者存在而不存在返回为真如果和指向同一个物理文件即它们的设备号和节点号相同返回为真字符串判断如果的长度为零则返回为真空字符串被认为是真如果的长度非零则返回为真非空字符串被认为是真如果非空则返回为真类似于如果字符串和相等则返回为真如果字符串和不相等则返回为真如果字典顺序在前面则返回为真如果字典顺序在后面则返回为真数值判断如果整数和相等则返回为真相当于如果整数和不相等则返回为真相当于如果大于则返回为真如果大于或等于则返回为真如果小于则返回为真如果小于或等于则返回为真逻辑判断逻辑非如果为则返回为真逻辑与只有当和都为真时结果才为真逻辑或如果或为真则返回为真使用来合并两个条件若其中一个条件为真则整体为真使用来合并两个条件只有两个条件都为真时整体才为真作业编写一个脚本该脚本可以判断当前用户是否为检查当前用户是否是当前用户是当前用户不是检查当前用户的是否为的是当前用户是当前用户不是编写一个脚本该脚本可以判断今天是否为休息日这样写的没有值放假工作测试语句步骤新建脚本写入如下内容步骤执行脚本语句步骤新建脚本写入如下内容步骤执行脚本在这个脚本中循环的作用是遍历并处理传递给脚本的所有参数具体来说脚本中的循环会一直执行直到没有更多的参数即不再存在或为空语句步骤新建脚本写入如下内容步骤执行脚本步骤新建一个文件写入如下内容步骤新建脚本写入如下内容步骤执行脚本语句步骤新建脚本写入如下内容步骤执行脚本作业反向输出当用户输入显示当用户输入显示当用户输入其它提示用户输入忽略大小写新建用户新建一个用户名列表新建一个脚本该脚本能够实现根据自动创建用户且密码随机生成用户创建后将用户名和密码导入到中随机密码生成可以使用脚本实现输出机器信息将本机的网卡的地址和地址截取出来输出到将本机的磁盘使用情况截取出来输出到判断系统空间使用的情况如果使用率大于则删除的内容测试用户是否存在并判断是否是超级用户写一个脚本如果指定的用户存在先说明其已经存在并显示其号和并判断是否是超级用户否则就创建用户并显示其号创建或目录文件该脚本应当有交互功能该脚本用于备份系统目录需要给予用户提示提示用户应当输入目录或者文件名判断用户要备份的文件是否存在如果不存在则告知用户并输出相应错误判断用户要备份的目标目录是否存在如果该目录不存在则需要问用户是否创建如果该目录已经存在则需要问用户是否重命名该目录测试是否可达根据文件中列举的地址判断地址是否可达只显示可达的地址不可达的可以使用输出名片交互式输入自己信息提示信息输入输入完成所有个人信息后一次性打印出个人所有信息并要求输出格式美观',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-03-05 14:48:49',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">XBCID's BLOG</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HCIA/" style="font-size: 1.05rem;">HCIA<sup>9</sup></a><a href="/tags/HCIP/" style="font-size: 1.05rem;">HCIP<sup>6</sup></a><a href="/tags/Huawei/" style="font-size: 1.05rem;">Huawei<sup>15</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>18</sup></a><a href="/tags/openEuler/" style="font-size: 1.05rem;">openEuler<sup>18</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">May 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">23</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">March 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">February 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Linux</span></a><a class="article-meta__tags" href="/tags/openEuler/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>openEuler</span></a></span></div></div><h1 class="post-title" itemprop="name headline">08 shell脚本语言基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-02-28T15:50:00.000Z" title="发表于 2025-02-28 23:50:00">2025-02-28</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-03-05T06:48:49.419Z" title="更新于 2025-03-05 14:48:49">2025-03-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为重庆"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>重庆</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/02/28/openEuler/%E5%AE%9E%E9%AA%8C/IA/08%20shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/"><header><a href="/tags/Linux/" tabindex="-1" itemprop="url">Linux</a><a href="/tags/openEuler/" tabindex="-1" itemprop="url">openEuler</a><h1 id="CrawlerTitle" itemprop="name headline">08 shell脚本语言基础</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">XBCID</span><time itemprop="dateCreated datePublished" datetime="2025-02-28T15:50:00.000Z" title="发表于 2025-02-28 23:50:00">2025-02-28</time><time itemprop="dateCreated datePublished" datetime="2025-03-05T06:48:49.419Z" title="更新于 2025-03-05 14:48:49">2025-03-05</time></header><h1 id="8-1-实验介绍"><a href="#8-1-实验介绍" class="headerlink" title="8.1 实验介绍"></a>8.1 实验介绍</h1><h2 id="8-1-1-实验介绍"><a href="#8-1-1-实验介绍" class="headerlink" title="8.1.1 实验介绍"></a>8.1.1 实验介绍</h2><p>在对系统进行运维时，shell 脚本给了我们很大帮助。通过 shell 脚本，可以大大减少工作量。<br>本实验主要介绍 shell 脚本的概念及使用。</p>
<h2 id="8-1-2-实验目标"><a href="#8-1-2-实验目标" class="headerlink" title="8.1.2 实验目标"></a>8.1.2 实验目标</h2><ul>
<li>掌握全局变量及局部变量；</li>
<li>掌握位置化参数使用；</li>
<li>掌握 shell 中的特殊字符；</li>
<li>掌握常用的 shell 语句。</li>
</ul>
<hr>
<h1 id="8-2-hell-变量"><a href="#8-2-hell-变量" class="headerlink" title="8.2 hell 变量"></a>8.2 hell 变量</h1><h2 id="8-2-1-用户变量的定义"><a href="#8-2-1-用户变量的定义" class="headerlink" title="8.2.1 用户变量的定义"></a>8.2.1 用户变量的定义</h2><p>步骤 1 执行如下命令，设置自定义局部变量。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root@openeuler ~]# dir=/usr/tmp/</span><br><span class="line">[root@openeuler ~]# echo $dir</span><br><span class="line">/usr/tmp/</span><br><span class="line">[root@openeuler ~]# today=Sunday</span><br><span class="line">[root@openeuler ~]# echo $today</span><br><span class="line">Sunday</span><br><span class="line">[root@openeuler ~]# echo $Today</span><br><span class="line">//无回显</span><br><span class="line">[root@openeuler ~]# str=&quot;Hapy New Year!&quot;</span><br><span class="line">[root@openeuler ~]# echo &quot;Wish You $str&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">##作为交互式输入手段，可以利用 read 命令由标准输入（即键盘）上读取数据，然后赋给指定的变量。</span></span></span><br><span class="line">其一般格式是：read 变量 1 [变量 2...]</span><br><span class="line">[root@openeuler ~]# read name</span><br><span class="line">openeuler //此处输入 openeuler</span><br><span class="line">[root@openeuler ~]# echo $name</span><br><span class="line">openeuler</span><br><span class="line">[root@openeuler ~]# read a b c</span><br><span class="line">kunpeng 2020 huawei #此处输入 kunpeng 2020 huawei</span><br><span class="line">[root@openeuler ~]# echo $a</span><br><span class="line">kunpeng</span><br><span class="line">[root@openeuler ~]# echo $b</span><br><span class="line">2020</span><br><span class="line">[root@openeuler ~]# echo $c</span><br><span class="line">huawei</span><br></pre></td></tr></table></figure>
<p>步骤 2 执行如下步骤，配置用户变量。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler ~]# vim .bash_profile ~/.bash_profile 是用户独享的配置文件</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在文件最后新增一行，修改完成后保存退出：</span></span><br><span class="line">a=1000</span><br><span class="line">[root@openEuler ~]# echo $a #未更新变量文件时，a 值未发生变化</span><br><span class="line">kunpeng</span><br><span class="line">[root@openEuler ~]# source .bash_profile #更新变量文件后，a 值发生变化</span><br><span class="line">[root@openEuler ~]# echo $a</span><br><span class="line">1000</span><br><span class="line">[root@openEuler ~]# bash #打开一个新的 bash</span><br><span class="line">[root@openEuler ~]# echo $a #a 变量未定义</span><br><span class="line">[root@openEuler ~]# exit #退出新打开的 shell</span><br><span class="line">[root@openEuler ~]# su - root #以登录的方式切换用户，此时会自动读取.bash_profile 文件</span><br><span class="line">[root@openEuler ~]# echo $a #a 变量值生效</span><br><span class="line">1000</span><br><span class="line">[root@openEuler ~]# exit #退出当前的登录 shell</span><br></pre></td></tr></table></figure>

<p>步骤 3 执行如下步骤，配置系统环境变量。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler ~]# vim /etc/profile /etc/profile 是系统的配置文件，所有用户共享</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在文件最后新增一行，输入如下信息，并保存退出：</span></span><br><span class="line">b=2000</span><br><span class="line">[root@openEuler ~]# echo $b #变量未更新</span><br><span class="line">2020</span><br><span class="line">[root@openEuler ~]# source /etc/profile #更新变量</span><br><span class="line">[root@openEuler ~]# echo $b</span><br><span class="line">2000 #变量值发生了变化</span><br><span class="line">[root@openEuler ~]# bash #打开一个新的 bash</span><br><span class="line">[root@openEuler ~]# echo $b #b 变量未定义</span><br><span class="line">[root@openEuler ~]# exit #退出新打开的 shell</span><br><span class="line">[root@openEuler ~]# su - root #以登录的方式切换用户，此时会自动读取.bash_profile 文件</span><br><span class="line">[root@openEuler ~]# echo $b #a 变量值生效</span><br><span class="line">2000</span><br><span class="line">[huawei@openEuler ~]$ exit #退出当前用户</span><br><span class="line">logout</span><br></pre></td></tr></table></figure>

<p>8.2.2 位置参数<br>步骤 1 在&#x2F;root 目录下新建三个文件 <em><strong>m1.c、m2.c、ex1.sh</strong></em>，内容如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">m1.c:</span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">printf(&quot;Begin \n&quot;);</span><br><span class="line">&#125;</span><br><span class="line">m2.c:</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">include &lt; stdio.h &gt;</span></span><br><span class="line">&#123;</span><br><span class="line">printf(&quot;OK! \n&quot;);</span><br><span class="line">&#125;</span><br><span class="line">ex1.sh:</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ex1.sh: shell script to combine files and count lines</span></span><br><span class="line">cat $1 $2 $3 $4 $5 $6 $7 $8 $9 | wc -l</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">end</span></span><br></pre></td></tr></table></figure>
<p>步骤 2 执行脚本 ex1.sh。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@openeuler ~]# chmod u+x ex1.sh</span><br><span class="line">[root@openeuler ~]# sh ex1.sh m1.c m2.c</span><br><span class="line">8</span><br></pre></td></tr></table></figure>
<h1 id="8-3-shell-中的特殊字符"><a href="#8-3-shell-中的特殊字符" class="headerlink" title="8.3 shell 中的特殊字符"></a>8.3 shell 中的特殊字符</h1><p>步骤 1 新建脚本 ex3.sh，写入如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">echo &quot;current directory is`pwd`&quot;</span><br><span class="line">echo &quot;home directory is $HOME&quot;</span><br><span class="line">echo &quot;file*.?&quot;</span><br><span class="line">echo &quot; directory &#x27;$HOME&#x27;&quot;</span><br><span class="line">步骤 2 执行脚本 ex3.sh</span><br><span class="line">[root@openeuler ~]# chmod u+x ex3.sh</span><br><span class="line">[root@openeuler ~]# sh ex3.sh</span><br><span class="line">current directory is &#x27;pwd&#x27;</span><br><span class="line">home directory is /root</span><br><span class="line">file*.?</span><br><span class="line">directory &#x27;/root&#x27;</span><br></pre></td></tr></table></figure>
<p>Linux 中其他特殊变量列表</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>$0</td>
<td>当前脚本的文件名</td>
</tr>
<tr>
<td>$n</td>
<td>传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是$1，第二个参数是$2。使用S10不能获取第十个参数， 获取第十个参数需要使用S(10（当n大于或等于10时，需要使用S（n）来获取参数）。</td>
</tr>
<tr>
<td>$#</td>
<td>传递给脚本或函数的参数个数</td>
</tr>
<tr>
<td>$*</td>
<td>传递给脚本或函数的所有参数</td>
</tr>
<tr>
<td>$@</td>
<td>传递给脚本或函数的所有参数。被双引号(“ “)包含时，与 $* 稍有不同，下面将会讲到。</td>
</tr>
<tr>
<td>$?</td>
<td>上个命令的退出状态，或函数的返回值。</td>
</tr>
<tr>
<td>$$</td>
<td>当前 Shell 进程 ID。对于 Shell 脚本，就是这些脚本所在的进程 ID</td>
</tr>
</tbody></table>
<h1 id="8-4-条件判断与循环结构"><a href="#8-4-条件判断与循环结构" class="headerlink" title="8.4 条件判断与循环结构"></a>8.4 条件判断与循环结构</h1><h2 id="8-4-1-if-语句"><a href="#8-4-1-if-语句" class="headerlink" title="8.4.1 if 语句"></a>8.4.1 if 语句</h2><h3 id="8-4-1-1-语法示例"><a href="#8-4-1-1-语法示例" class="headerlink" title="8.4.1.1 语法示例"></a>8.4.1.1 语法示例</h3><p>步骤 1 新建脚本 ex4.sh，写入如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">a=3</span><br><span class="line">b=$1</span><br><span class="line">if [ $a == $b ]</span><br><span class="line">then</span><br><span class="line">echo &quot;You win!&quot;</span><br><span class="line">else</span><br><span class="line">echo &quot;Please guess again.&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h3 id="8-4-1-3【附录】if-常用判断"><a href="#8-4-1-3【附录】if-常用判断" class="headerlink" title="8.4.1.3【附录】if 常用判断"></a>8.4.1.3【附录】if 常用判断</h3><h4 id="文件-目录判断"><a href="#文件-目录判断" class="headerlink" title="文件&#x2F;目录判断"></a>文件&#x2F;目录判断</h4><ul>
<li><code>[-a FILE]</code><br>  如果文件 <code>FILE</code> 存在，返回为真。这个选项在许多系统中已经过时，但在一些系统中仍然有效。</li>
<li><code>[-b FILE]</code><br>  如果 <code>FILE</code> 存在并且是一个块设备文件（例如硬盘分区或虚拟磁盘），返回为真。</li>
<li><code>[-c FILE]</code><br>  如果 <code>FILE</code> 存在并且是一个字符设备文件（例如终端设备或串行端口设备），返回为真。</li>
<li><code>[-d FILE]</code><br>  如果 <code>FILE</code> 存在并且是一个目录，返回为真。</li>
<li><code>[-e FILE]</code><br>  如果 <code>FILE</code> 存在，无论类型是什么，都返回为真。</li>
<li><code>[-f FILE]</code><br>  如果 <code>FILE</code> 存在并且是一个普通文件（不是目录、符号链接等），返回为真。</li>
<li><code>[-g FILE]</code><br>  如果 <code>FILE</code> 存在并且设置了 SGID（Set Group ID）位，返回为真。</li>
<li><code>[-h FILE]</code><br>  如果 <code>FILE</code> 存在并且是一个符号链接文件，返回为真。<strong>注意</strong>：该选项在某些老旧系统上可能无效，可以使用 <code>[-L FILE]</code> 替代。</li>
<li><code>[-k FILE]</code><br>  如果 <code>FILE</code> 存在并且设置了“粘着位”（sticky bit），返回为真。粘着位通常用于确保文件只能由文件的所有者删除。</li>
<li><code>[-p FILE]</code><br>  如果 <code>FILE</code> 存在并且是命名管道（FIFO），返回为真。</li>
<li><code>[-r FILE]</code><br>  如果 <code>FILE</code> 存在并且是可读的，返回为真。</li>
<li><code>[-s FILE]</code><br>  如果 <code>FILE</code> 存在并且大小不为零（即文件非空），返回为真。</li>
<li><code>[-u FILE]</code><br>  如果 <code>FILE</code> 存在并且设置了 SUID（Set User ID）位，返回为真。</li>
<li><code>[-w FILE]</code><br>  如果 <code>FILE</code> 存在并且是可写的，返回为真。</li>
<li><code>[-x FILE]</code><br>  如果 <code>FILE</code> 存在并且是可执行的，返回为真。</li>
<li><code>[-O FILE]</code><br>  如果 <code>FILE</code> 存在并且是当前用户的所有文件，返回为真。</li>
<li><code>[-G FILE]</code><br>  如果 <code>FILE</code> 存在并且属于当前用户的默认组，返回为真。</li>
<li><code>[-L FILE]</code><br>  如果 <code>FILE</code> 存在并且是一个符号链接文件，返回为真。</li>
<li><code>[-N FILE]</code><br>  如果 <code>FILE</code> 存在并且自上次读取以来被修改过，返回为真。</li>
<li><code>[-S FILE]</code><br>  如果 <code>FILE</code> 存在并且是一个套接字文件，返回为真。</li>
</ul>
<h4 id="文件比较"><a href="#文件比较" class="headerlink" title="文件比较"></a>文件比较</h4><ul>
<li><p><code>[ FILE1 -nt FILE2 ]</code><br>  如果 <code>FILE1</code> 比 <code>FILE2</code> 更新（即 <code>FILE1</code> 的修改时间较新），或者 <code>FILE1</code> 存在而 <code>FILE2</code> 不存在，返回为真。</p>
</li>
<li><p><code>[ FILE1 -ot FILE2 ]</code><br>  如果 <code>FILE1</code> 比 <code>FILE2</code> 旧（即 <code>FILE1</code> 的修改时间较早），或者 <code>FILE2</code> 存在而 <code>FILE1</code> 不存在，返回为真。</p>
</li>
<li><p><code>[ FILE1 -ef FILE2 ]</code><br>  如果 <code>FILE1</code> 和 <code>FILE2</code> 指向同一个物理文件（即它们的设备号和节点号相同），返回为真。</p>
</li>
</ul>
<h4 id="字符串判断"><a href="#字符串判断" class="headerlink" title="字符串判断"></a>字符串判断</h4><ul>
<li><code>[ -z STRING ]</code><br>  如果 STRING 的长度为零，则返回为真。<br>  空字符串被认为是“真”。</li>
<li><code>[ -n STRING ]</code><br>  如果 STRING 的长度非零，则返回为真。<br>  非空字符串被认为是“真”。</li>
<li><code>[ STRING1 ]</code><br>  如果 STRING1 非空，则返回为真。<br>  类似于 <code>[ -n STRING1 ]</code>。</li>
<li><code>[ STRING1 == STRING2 ]</code><br>  如果字符串 <code>STRING1</code> 和 <code>STRING2</code> 相等，则返回为真。</li>
<li><code>[ STRING1 != STRING2 ]</code><br>  如果字符串 <code>STRING1</code> 和 <code>STRING2</code> 不相等，则返回为真。</li>
<li><code>[ STRING1 &lt; STRING2 ]</code><br>  如果 <code>STRING1</code> 字典顺序在 <code>STRING2</code> 前面，则返回为真。</li>
<li><code>[ STRING1 &gt; STRING2 ]</code><br>  如果 <code>STRING1</code> 字典顺序在 <code>STRING2</code> 后面，则返回为真。</li>
</ul>
<h4 id="数值判断"><a href="#数值判断" class="headerlink" title="数值判断"></a>数值判断</h4><ul>
<li><code>[ INT1 -eq INT2 ]</code><br>  如果整数 <code>INT1</code> 和 <code>INT2</code> 相等，则返回为真。<br>  相当于 <code>INT1 == INT2</code>。</li>
<li><code>[ INT1 -ne INT2 ]</code><br>  如果整数 <code>INT1</code> 和 <code>INT2</code> 不相等，则返回为真。<br>  相当于 <code>INT1 != INT2</code>。</li>
<li><code>[ INT1 -gt INT2 ]</code><br>  如果 <code>INT1</code> 大于 <code>INT2</code>，则返回为真。</li>
<li><code>[ INT1 -ge INT2 ]     如果 </code>INT1<code>大于或等于</code>INT2&#96;，则返回为真。</li>
<li><code>[ INT1 -lt INT2 ]</code><br>  如果 <code>INT1</code> 小于 <code>INT2</code>，则返回为真。</li>
<li><code>[ INT1 -le INT2 ]</code><br>  如果 <code>INT1</code> 小于或等于 <code>INT2</code>，则返回为真。</li>
</ul>
<h4 id="逻辑判断"><a href="#逻辑判断" class="headerlink" title="逻辑判断"></a>逻辑判断</h4><ul>
<li><p><code>[ ! EXPR ]</code><br>  逻辑非，如果 <code>EXPR</code> 为 false，则返回为真。</p>
</li>
<li><p><code>[ EXPR1 -a EXPR2 ]</code><br>  逻辑与，只有当 <code>EXPR1</code> 和 <code>EXPR2</code> 都为真时，结果才为真。</p>
</li>
<li><p><code>[ EXPR1 -o EXPR2 ]</code><br>  逻辑或，如果 <code>EXPR1</code> 或 <code>EXPR2</code> 为真，则返回为真。</p>
</li>
<li><p><code>[ ] || [ ]</code><br>  使用 <code>OR</code> 来合并两个条件，若其中一个条件为真，则整体为真。</p>
</li>
<li><p><code>[ ] &amp;&amp; [ ]</code><br>  使用 <code>AND</code> 来合并两个条件，只有两个条件都为真时，整体才为真。</p>
</li>
</ul>
<h3 id="8-4-1-4-作业"><a href="#8-4-1-4-作业" class="headerlink" title="8.4.1.4 作业"></a>8.4.1.4 作业</h3><p>编写一个脚本，该脚本可以判断当前用户是否为 root。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查当前用户是否是 root</span></span><br><span class="line">if [ $USER == &quot;root&quot; ]</span><br><span class="line">then</span><br><span class="line">  echo &quot;当前用户是 root&quot;</span><br><span class="line">else</span><br><span class="line">  echo &quot;当前用户不是 root&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">OR</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查当前用户的 UID 是否为 0（root 的 UID 是 0）</span> </span><br><span class="line">if [ &quot;$UID&quot; -eq 0 ]; </span><br><span class="line">then </span><br><span class="line">	echo &quot;当前用户是 root&quot; </span><br><span class="line">else </span><br><span class="line">	echo &quot;当前用户不是 root&quot; </span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>编写一个脚本，该脚本可以判断今天是否为休息日。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">day=<span class="built_in">date</span>|<span class="built_in">head</span> -c 3     这样写的day没有值</span></span><br><span class="line">day_of_week = $(date|head -c 3)</span><br><span class="line">if [$day == &#x27;Sat&#x27;]||[$day == &#x27;Sunday&#x27;]</span><br><span class="line">then</span><br><span class="line">	echo &quot;放假！&quot;</span><br><span class="line">else</span><br><span class="line">	echo &quot;工作！&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="8-4-2-测试语句"><a href="#8-4-2-测试语句" class="headerlink" title="8.4.2 测试语句"></a>8.4.2 测试语句</h2><p>步骤 1 新建脚本 ex5.sh，写入如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">echo &quot;Please enter your filename:&quot;</span><br><span class="line">read filename</span><br><span class="line">if [ -f &quot;$filename&quot; ]</span><br><span class="line">then cat $filename</span><br><span class="line">elif [ -d &quot;$filename&quot; ]</span><br><span class="line">then cd $filename</span><br><span class="line">pwd</span><br><span class="line">ls -l -a</span><br><span class="line">else echo &quot;$filename:bad filename&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>步骤 2 执行脚本 ex5.sh。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@openeuler ~]# chmod u+x ex5.sh</span><br><span class="line">[root@openeuler ~]# mkdir test</span><br><span class="line">[root@openeuler ~]# sh ex5.sh</span><br><span class="line">Please enter your filename:</span><br><span class="line">test</span><br><span class="line">/root/test</span><br><span class="line">total 8</span><br><span class="line">drwx------. 2 root root 4096 Feb 18 11:29 .</span><br><span class="line">dr-xr-x---. 3 root root 4096 Feb 18 11:30 ..</span><br><span class="line">[root@openeuler ~]# sh ex5.sh</span><br><span class="line">Please enter your filename:</span><br><span class="line">ex3.sh</span><br><span class="line">echo &quot;current directory is &#x27;pwd&#x27;&quot;</span><br><span class="line">echo &quot;home directory is $HOME&quot;</span><br><span class="line">echo &quot;file*.?&quot;</span><br><span class="line">echo &quot;directory &#x27;$HOME&#x27;&quot;</span><br></pre></td></tr></table></figure>


<h2 id="8-4-3-while-语句"><a href="#8-4-3-while-语句" class="headerlink" title="8.4.3 while 语句"></a>8.4.3 while 语句</h2><p>步骤 1 新建脚本 ex6.sh，写入如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">while [ $1 ]</span><br><span class="line">do</span><br><span class="line">if [ -f $1 ]</span><br><span class="line">then echo &quot;display:$1&quot;</span><br><span class="line">cat $1</span><br><span class="line">else echo &quot;$1 is not a file name&quot;</span><br><span class="line">fi</span><br><span class="line">shift</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>步骤 2 执行脚本 ex6.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@openeuler ~]# sh ex6.sh ex3.sh</span><br><span class="line">display:ex3.sh</span><br><span class="line">echo &quot;current directory is &#x27;pwd&#x27;&quot;</span><br><span class="line">echo &quot;home directory is $HOME&quot;</span><br><span class="line">echo &quot;file*.?&quot;</span><br><span class="line">echo &quot;directory &#x27;$HOME&#x27;&quot;</span><br><span class="line">[root@openeuler ~]# sh ex6.sh a</span><br><span class="line">a is not a file name</span><br></pre></td></tr></table></figure>
<p>在这个脚本中，<code>while</code> 循环的作用是遍历并处理传递给脚本的所有参数。具体来说，脚本中的 <code>while</code> 循环会一直执行，直到没有更多的参数（即 <code>$1</code> 不再存在或为空）。</p>
<h2 id="8-4-4-for-语句"><a href="#8-4-4-for-语句" class="headerlink" title="8.4.4 for 语句"></a>8.4.4 for 语句</h2><p>步骤 1 新建脚本 ex7.sh，写入如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">for Num in &#123;1..10&#125;</span><br><span class="line">do</span><br><span class="line">echo $Num</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>步骤 2 执行脚本 ex7.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@openeuler ~]# sh ex7.sh</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td></tr></table></figure>
<p>步骤 3 新建一个 namefile 文件，写入如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user1</span><br><span class="line">user2</span><br><span class="line">user3</span><br><span class="line">user4</span><br></pre></td></tr></table></figure>
<p>步骤 4 新建脚本 ex8.sh，写入如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">for Name in $(cat ./namefile)</span><br><span class="line">do</span><br><span class="line">echo $Name</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>步骤 5 执行脚本 ex8.sh。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@openeuler ~]# sh ex8.sh</span><br><span class="line">user1</span><br><span class="line">user2</span><br><span class="line">user3</span><br><span class="line">user4</span><br></pre></td></tr></table></figure>
<h2 id="8-4-5-case-语句"><a href="#8-4-5-case-语句" class="headerlink" title="8.4.5 case 语句"></a>8.4.5 case 语句</h2><p>步骤 1 新建脚本 ex9.sh，写入如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">echo &#x27;Input a number between 1 to 4&#x27;</span><br><span class="line">printf &#x27;Your number is:\n&#x27;</span><br><span class="line">read aNum</span><br><span class="line">case $aNum in</span><br><span class="line">1) echo &#x27;You select 1&#x27;</span><br><span class="line">;;</span><br><span class="line">2) echo &#x27;You select 2&#x27;</span><br><span class="line">;;</span><br><span class="line">1) echo &#x27;You select 3&#x27;</span><br><span class="line">;;</span><br><span class="line">2) echo &#x27;You select 4&#x27;</span><br><span class="line">;;</span><br><span class="line">*) echo &#x27;You do not select a number between 1 to 4&#x27;</span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>步骤 2 执行脚本 ex9.sh。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@openEuler ~]# sh ex9.sh</span><br><span class="line">Input a number between 1 to 4</span><br><span class="line">Your number is:</span><br><span class="line">1</span><br><span class="line">You select 1</span><br></pre></td></tr></table></figure>

<p>8.5 作业</p>
<ul>
<li>1 反向输出<ul>
<li>当用户输入 yes，显示 no</li>
<li>当用户输入 no，显示 yes</li>
<li>当用户输入其它，提示用户输入 yes&#x2F;no</li>
<li>忽略大小写</li>
</ul>
</li>
<li>新建用户<ul>
<li>新建一个用户名列表 namefile</li>
<li>新建一个脚本，该脚本能够实现根据 namefile 自动创建用户，且密码随机生成。用户创建后将用户名和密码导入到&#x2F;root&#x2F;loginname.txt 中。</li>
<li>随机密码生成可以使用：openssl rand -base64 6</li>
</ul>
</li>
<li>脚本实现输出机器信息<ul>
<li>将本机的网卡的 IP 地址和 MAC 地址截取出来，输出到&#x2F;root&#x2F;nic</li>
<li>将本机的磁盘使用情况截取出来 输出到 &#x2F;root&#x2F;disk</li>
<li>判断系统空间使用的情况，如果 &#x2F; 使用率大于 30% 则删除 &#x2F;tmp 的内容</li>
</ul>
</li>
<li>测试用户是否存在，并判断是否是超级用户<ul>
<li>写一个脚本：如果指定的用户存在，先说明其已经存在，并显示其 ID 号和 SHELL，并判断是否是超级用户；否则，就创建用户，并显示其 ID 号</li>
</ul>
</li>
<li>创建或目录文件<ul>
<li>该脚本应当有交互功能</li>
<li>该脚本用于备份系统目录</li>
<li>需要给予用户提示，提示用户应当输入目录或者文件名</li>
<li>判断用户要备份的文件是否存在，如果不存在则告知用户，并输出相应错误</li>
<li>判断用户要备份的目标目录是否存在，如果该目录不存在，则需要问用户是否创建，如果该目录已经存在，则需要问用户是否重命名该目录</li>
</ul>
</li>
<li>测试 IP 是否可达<ul>
<li>根据 iplist.txt 文件中列举的 IP 地址，判断 IP 地址是否可达。</li>
<li>只显示可达的 IP 地址。（不可达的可以使用 &gt;&gt; &#x2F;dev&#x2F;null）</li>
</ul>
</li>
<li>输出名片<ul>
<li>交互式输入自己信息，提示信息输入；</li>
<li>输入完成所有个人信息后，一次性打印出个人所有信息，并要求输出格式美观</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">XBCID</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/02/28/openEuler/%E5%AE%9E%E9%AA%8C/IA/08%20shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/02/28/openEuler/%E5%AE%9E%E9%AA%8C/IA/08%20shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/')">08 shell脚本语言基础</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/02/28/openEuler/%E5%AE%9E%E9%AA%8C/IA/08%20shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=08 shell脚本语言基础&amp;url=http://example.com/2025/02/28/openEuler/%E5%AE%9E%E9%AA%8C/IA/08%20shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">XBCID's BLOG</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Linux<span class="tagsPageCount">18</span></a><a class="post-meta__box__tags" href="/tags/openEuler/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>openEuler<span class="tagsPageCount">18</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/01%20openEuler%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%85%A5%E9%97%A8/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">01 openEuler操作系统入门</div></div></a></div><div class="next-post pull-right"><a href="/2025/03/02/openEuler/%E5%AE%9E%E9%AA%8C/IP/01%20openEuler%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1/02%20Nginx%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">02 命令行操作基础</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/01%20openEuler%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%85%A5%E9%97%A8/" title="01 openEuler操作系统入门"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">01 openEuler操作系统入门</div></div></a></div><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/02%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C%E5%9F%BA%E7%A1%80/" title="02 命令行操作基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">02 命令行操作基础</div></div></a></div><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/03%20%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E4%BB%A5%E5%8F%8A%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86/" title="03 文本编辑器以及文本处理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">03 文本编辑器以及文本处理</div></div></a></div><div><a href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/06%20%E7%AE%A1%E7%90%86%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%8F%8A%E5%AD%98%E5%82%A8/" title="06 管理文件系统及存储"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-05-19</div><div class="title">06 管理文件系统及存储</div></div></a></div><div><a href="/2025/02/14/openEuler/%E7%AC%94%E8%AE%B0/IA/04%20%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" title="04 用户和权限管理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-14</div><div class="title">04 用户和权限管理</div></div></a></div><div><a href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/05%20%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%B9%B6%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1/" title="05 安装软件并管理服务"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-05-19</div><div class="title">05 安装软件并管理服务</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#8-1-%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">8.1 实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-1-%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">8.1.1 实验介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-2-%E5%AE%9E%E9%AA%8C%E7%9B%AE%E6%A0%87"><span class="toc-number">1.2.</span> <span class="toc-text">8.1.2 实验目标</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-2-hell-%E5%8F%98%E9%87%8F"><span class="toc-number">2.</span> <span class="toc-text">8.2 hell 变量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-1-%E7%94%A8%E6%88%B7%E5%8F%98%E9%87%8F%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">2.1.</span> <span class="toc-text">8.2.1 用户变量的定义</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-3-shell-%E4%B8%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="toc-number">3.</span> <span class="toc-text">8.3 shell 中的特殊字符</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-4-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E4%B8%8E%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84"><span class="toc-number">4.</span> <span class="toc-text">8.4 条件判断与循环结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-1-if-%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.1.</span> <span class="toc-text">8.4.1 if 语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-1-1-%E8%AF%AD%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.1.1.</span> <span class="toc-text">8.4.1.1 语法示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-1-3%E3%80%90%E9%99%84%E5%BD%95%E3%80%91if-%E5%B8%B8%E7%94%A8%E5%88%A4%E6%96%AD"><span class="toc-number">4.1.2.</span> <span class="toc-text">8.4.1.3【附录】if 常用判断</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6-%E7%9B%AE%E5%BD%95%E5%88%A4%E6%96%AD"><span class="toc-number">4.1.2.1.</span> <span class="toc-text">文件&#x2F;目录判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%AF%94%E8%BE%83"><span class="toc-number">4.1.2.2.</span> <span class="toc-text">文件比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%A4%E6%96%AD"><span class="toc-number">4.1.2.3.</span> <span class="toc-text">字符串判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%88%A4%E6%96%AD"><span class="toc-number">4.1.2.4.</span> <span class="toc-text">数值判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD"><span class="toc-number">4.1.2.5.</span> <span class="toc-text">逻辑判断</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-1-4-%E4%BD%9C%E4%B8%9A"><span class="toc-number">4.1.3.</span> <span class="toc-text">8.4.1.4 作业</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-2-%E6%B5%8B%E8%AF%95%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.2.</span> <span class="toc-text">8.4.2 测试语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-3-while-%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.3.</span> <span class="toc-text">8.4.3 while 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-4-for-%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.4.</span> <span class="toc-text">8.4.4 for 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-5-case-%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.5.</span> <span class="toc-text">8.4.5 case 语句</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IP/07%20openEuler%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E5%85%A5%E9%97%A8/" title="无题">无题</a><time datetime="2025-05-18T19:46:45.900Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/%E6%B3%A8%E9%87%8A/shebang/" title="无题">无题</a><time datetime="2025-05-18T19:46:45.880Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/10%20%E5%B8%B8%E7%94%A8%E5%B0%8F%E6%8C%87%E4%BB%A4/" title="无题">无题</a><time datetime="2025-05-18T19:46:45.685Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/09%20Samba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/" title="09 Samba文件共享服务器管理">09 Samba文件共享服务器管理</a><time datetime="2025-05-18T19:46:45.684Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/19/openEuler/%E7%AC%94%E8%AE%B0/IA/08%20%E4%BD%BF%E7%94%A8shell%E8%84%9A%E6%9C%AC/" title="08 使用shell脚本">08 使用shell脚本</a><time datetime="2025-05-18T19:46:45.683Z" title="发表于 2025-05-19 03:46:45">2025-05-19</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="XBCID" target="_blank">XBCID</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">37</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HCIA/" style="font-size: 0.88rem;">HCIA<sup>9</sup></a><a href="/tags/HCIP/" style="font-size: 0.88rem;">HCIP<sup>6</sup></a><a href="/tags/Huawei/" style="font-size: 0.88rem;">Huawei<sup>15</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>18</sup></a><a href="/tags/openEuler/" style="font-size: 0.88rem;">openEuler<sup>18</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("01/12/2021 14:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 XBCID 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>